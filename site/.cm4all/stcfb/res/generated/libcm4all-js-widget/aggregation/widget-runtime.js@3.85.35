window.__loadedJsLibraries=window.__loadedJsLibraries||(window.__loadedJsLibraries=new Object());window.__loadedCssLibraries=window.__loadedCssLibraries||(window.__loadedCssLibraries=new Object());if(window.__loadedJsLibraries["/res/js/lib/wrkrndz/jquery-register.js"]!==true){window.__loadedJsLibraries["/res/js/lib/wrkrndz/jquery-register.js"]=true;window.$j=jQuery;if(window.$===window.jQuery){jQuery.noConflict()}jQuery.noConflict=function(){return jQuery}}if(window.__loadedJsLibraries["/res/js/lib/HttpURL.js"]!==true){window.__loadedJsLibraries["/res/js/lib/HttpURL.js"]=true;(function(PKG){if(typeof(window.encodeURIComponent)=="undefined"){window.encodeURIComponent=function(a){return window.escape(a)}}if(typeof(window.decodeURIComponent)=="undefined"){window.decodeURIComponent=function(a){return window.unescape(a)}}PKG.HttpURL=Class.create({initialize:function(g){this.isAbsolute=(g.startsWith("http://")||g.startsWith("https://"));this.pathStartsWithSlash=true;if(!this.isAbsolute){this.pathStartsWithSlash=/^\//.test(g);g=PKG.HttpURL.DUMMY_PREFIX+g.replace(/^\//,"")}this.protocol=null;this.host=null;this.port=-1;this.file=null;this.query=null;this.authority=null;this.path=null;this.userInfo=null;this.ref=null;this.qParams=new Hash();var e,d,f;var b=g;var a=0;var k=null;var h=false;d=g.length;while((d>0)&&(g.charAt(d-1)<=" ")){d--}while((a<d)&&(g.charAt(a)<=" ")){a++}if(g.substr(a,4).toLowerCase()=="url:"){a+=4}if(a<g.length&&g.charAt(a)=="#"){h=true}for(e=a;!h&&(e<d)&&((f=g.charAt(e))!="/");e++){if(f==":"){var j=g.substring(a,e).toLowerCase();k=j;a=e+1;break}}this.protocol=k;if(this.protocol==null){}e=g.indexOf("#",a);if(e>=0){this.ref=g.substring(e+1,d);d=e}this.parseURL(g,a,d);this.parseQueryString()},parseURL:function(j,a,d){var c=false;var g=false;if(a<d){var h=j.indexOf("?");g=(h==a);if(h!=-1){this.query=j.substring(h+1,d);if(d>h){d=h}j=j.substring(0,h)}}var e=0;if((a<=d-2)&&(j.charAt(a)=="/")&&(j.charAt(a+1)=="/")){a+=2;e=j.indexOf("/",a);if(e<0){e=j.indexOf("?",a);if(e<0){e=d}}this.host=this.authority=j.substring(a,e);var b=this.authority.indexOf("@");if(b!=-1){this.userInfo=this.authority.substring(0,b);this.host=this.authority.substring(b+1)}b=this.host.indexOf(":");this.port=-1;if(b>=0){if(this.host.length>(b+1)){this.port=parseInt(this.host.substring(b+1))}this.host=this.host.substring(0,b)}a=e;if(this.authority!=null&&this.authority.length>0){this.file=""}}if(this.host==null){this.host=""}if(a<d){if(j.charAt(a)=="/"){this.file=j.substring(a,d)}else{if(this.file!=null&&this.file.length>0){c=true;var b=this.file.lastIndexOf("/");var f="";if(b==-1&&this.authority!=null){f="/"}this.file=this.file.substring(0,b+1)+f+j.substring(a,d)}else{var f=(this.authority!=null)?"/":"";this.file=f+j.substring(a,d)}}}else{if(g&&this.file!=null){var b=this.file.lastIndexOf("/");if(b<0){b=0}this.file=this.file.substring(0,b)+"/"}}if(this.file==null){this.file=""}if(c){while((e=this.file.indexOf("/./"))>=0){this.file=this.file.substring(0,e)+this.file.substring(e+2)}while((e=this.file.indexOf("/../"))>=0){if((d=this.file.lastIndexOf("/",e-1))>=0){this.file=this.file.substring(0,d)+this.file.substring(e+3)}else{this.file=this.file.substring(e+3)}}while(this.file.substring(this.file.length-3,this.file.length)=="/.."){e=this.file.indexOf("/..");if((d=this.file.lastIndexOf("/",e-1))>=0){this.file=this.file.substring(0,d+1)}else{this.file=this.file.substring(0,e)}}if(this.file.substring(this.file.length-2,this.file.length)=="/."){this.file=this.file.substring(0,this.file.length()-1)}}if(!this.pathStartsWithSlash){this.file=this.file.replace(/^\//,"")}this.path=this.file;this.file=this.query==null?this.file:this.file+"?"+this.query},parseQueryString:function(){if(this.query==null||this.query.length==0){return}this.qParams=$H(this.query.toQueryParams())},getParameter:function(c,a){if(!c){return a}var b=this.qParams.get(c);return b==null?a:Object.isArray(b)?b.first():b},setParameter:function(b,e,a){if(!b){return}var c=this.qParams.get(b);if(Object.isString(c)){this.qParams.set(b,[c])}if(a||c==null){this.qParams.set(b,new Array())}var d=this.qParams.get(b);if(Object.isArray(e)){this.qParams.set(b,d.concat(e))}else{d.push(e)}},setParameters:function(b,a){$H(b||{}).each(function(c){this.setParameter(c.key,c.value,a)}.bind(this))},removeParameter:function(a){this.qParams.unset(a)},removeAllParams:function(){this.qParams=new Hash()},getParameterValues:function(a){return this.qParams.get(a)},getParameterNames:function(){return this.qParams.keys()},toString:function(){return this.toExternalForm()},toExternalForm:function(){return this._toExternalForm(false)},_toExternalForm:function(b){var a=this.protocol;a+=":";if(this.authority!=null&&this.authority.length>0){a+="//";a+=this.authority}if(this.path!=null){a+=((this.pathStartsWithSlash?"":"/")+this.path)}if(!b){var c=this.qParams.toQueryString();if(c.length>0){a+="?"+c}}if(this.ref!=null){a+="#";a+=this.ref}if(!this.isAbsolute){a=a.substring(PKG.HttpURL.DUMMY_PREFIX.length-(this.pathStartsWithSlash?1:0))}return a},getPrototypePair:function(){return{url:this._toExternalForm(true),parameters:this.qParams}},debug:function(){var a="protocol:  "+this.protocol+"\nhost:      "+this.host+"\nport:      "+this.port+"\nfile:      "+this.file+"\nuserInfo:  "+this.userInfo+"\npath:      "+this.path+"\nref:       "+this.ref+"\nquery:     "+this.query+"\nauthority: "+this.authority+"\nqParams:   "+this.qParams.toQueryString()+"\n\n";if(typeof(console)!="undefined"&&typeof(console.log)=="function"){console.log(a)}else{alert(a)}}});Object.extend(PKG.HttpURL,{DUMMY_PREFIX:"http://dummy/",urlencode:function(d){var c=/\+/g;var b=/%20/g;var a=/'/g;d=encodeURIComponent(d);return d.replace(c,"%2B").replace(b,"+").replace(a,"%27")},urldecode:function(b){var a=/\+/g;b=b.replace(a,"%20");return decodeURIComponent(b)},makeAbsolute:function(a){return PKG.HttpURL.qualify(a)},qualify:function(a){if(!this.qualifyCache){this.qualifyCache={};this.anchor=new Element("a",{href:"#"}).update("x");this.div=new Element("div").insert(this.anchor)}if(!this.qualifyCache[a]){this.anchor.href=a;this.qualifyCache[a]=this.anchor.href}return this.qualifyCache[a]},quEscape:function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")}});window.HttpURL=PKG.HttpURL;window.HttpURLUtils={rotBase:1,rotateString:function(f,d){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZ";var e=new String();d=new Number(d);for(var b=0;b<f.length;b++){var c=f.substring(b,b+1);var g=a.indexOf(c.toUpperCase());if(g>=0){g=(g+d)%a.length;c=(c==c.toUpperCase())?a.substring(g,g+1):a.substring(g,g+1).toLowerCase()}e=e+c}return e},reverseString:function(a){a=(a||"");return a.split("").reverse().join("")},setReverseParameter:function(b,a,d){var c=b.getParameter("rot-base");c=b.getParameter("rot-base");if(!c){c=new HttpURL(document.location.href).getParameter("rot-base");if(c){c=((new Number(c)+1)%26)+1}if(!c){c=((HttpURLUtils.rotBase++)%26)+1}b.setParameter("rot-base",c)}d=HttpURLUtils.rotateString(d,c);b.setParameter(a,HttpURLUtils.reverseString(d))},getReverseParameter:function(c,b,a){var e=HttpURLUtils.reverseString(c.getParameter(b));var d;if(e&&(d=c.getParameter("rot-base"))!=""){d=26-new Number(d);e=HttpURLUtils.rotateString(e,d)}return(e||a)}}})((function(){if(typeof LIBCM4ALL_JS_WIDGET_NAMESPACE=="object"){return LIBCM4ALL_JS_WIDGET_NAMESPACE}if(typeof(window.cm4all)=="undefined"){window.cm4all={}}return window.cm4all})())}if(window.__loadedJsLibraries["/res/js/lib/Common.js"]!==true){window.__loadedJsLibraries["/res/js/lib/Common.js"]=true;(function(PKG){PKG.Common=({notTooOften:function(e,d){var c=0;var b=0;if(e){d=d.bind(e)}return function(g){if(b){clearTimeout(b);b=0}const f=new Date();if(f-c>=150){c=f;d(g)}else{b=setTimeout(function(){c=new Date();d(g)},150)}}}});function a(e){var g=jQuery(this);var d=g.closest(".content");var c=g.width();var b=Math.max(g.height(),1);var i=(c/b)||1;var h="";if(i<=1&&b<e.minHeight){b=e.minHeight;c=b*i;h=c+"px"}if(i>=1&&c<e.minWidth){c=e.minWidth;b=c/i;h=c+"px"}function f(){g.css({visibility:"hidden",width:h});var l=d.width();var k=d.height();var j=Math.min(l,c);var m=j/i;if(m>k){j=k*i}g.css({visibility:"",width:j+"px"})}f();jQuery(window).resize(f)}Object.extend(PKG.Common,{_defaultLogger:null,getLibServer:function(){if(window.jslibServer){return window.jslibServer}if(window.beng&&window.beng.env&&window.beng.env.common_prefix){return window.beng.env.common_prefix}return""},requireLibrary:function(f,h){var d=this;if(!Object.isArray(f)){f=[f]}var c=f[0];if(Object.isArray(c)){var g=f.findAll(function(i){return Object.isArray(i)?Object.toJSON(i)!=Object.toJSON(c):true});var b=function(){PKG.Common.requireLibrary.bind(d,g,h).defer()};var e={paylord:c};c.each(function(i){PKG.Common.__requireLibrary(i,e,b,true)});return}else{if(c){PKG.Common.__requireLibrary(c,{paylord:f},h,false)}else{if(typeof(h)=="function"){h()}}}},__requireLibrary:function(b,g,k,d){var f;var i=null;var c;var e=Event.observe||Event.prototype.constructor.observe;var j=window.__loadedJsLibraries||(window.__loadedJsLibraries=new Object());if(Object.isFunction(b.isLoaded)){f=b.isLoaded()}else{if(j[b]===true){f=true}else{f=(i=$$("script").find(function(l){return(PKG.HttpURL.qualify(l.src)==PKG.HttpURL.qualify(b.url||b))}))?true:false}}if(!f){i=new Element("script",{type:"text/javascript"});var h=PKG.Common.getOrCreateHeadElement();c=function(){var l=b.url||b;if(!j[l]&&(!i.readyState||i.readyState=="loaded"||i.readyState=="complete")){j[l]=true;i.removeAttribute("dirty");PKG.Common.callbackFunc(b,g,{callback:k,script:i,skipCheck:false,isParallel:d})}};e(i,"error",c);e(i,"load",c);e(i,"readystatechange",c);i.setAttribute("dirty","dirty");i.src=b.url||b;h.insert({bottom:i});h=null}else{c=function(){if(i&&i.getAttribute("dirty")){window.setTimeout(c,10);return}PKG.Common.callbackFunc(b,g,{callback:k,script:new Element("script"),skipCheck:true,isParallel:d});i=null;c=null};c.call(this)}},loadCss:function(d,c){if(!Object.isArray(d)){d=[d]}var b=PKG.Common.getOrCreateHeadElement();d.each(function(e){if(Object.isArray(e)){PKG.Common.loadCss(e)}else{var h;var g=window.__loadedCssLibraries||(window.__loadedCssLibraries=new Object());if(g[e]===true){h=true}else{h=$$("link").any(function(i){return(PKG.HttpURL.qualify(i.href)==PKG.HttpURL.qualify(e))})}if(!h){var f={};f[c||"bottom"]=new Element("link",{type:"text/css",rel:"stylesheet",href:e});b.insert(f);g[e]=true}}})},createCssRule:function(c,d){var b=jQuery("style#jslib-css");if(b.length==0){b=jQuery("<style type='text/css'></style>");jQuery("head").append(b)}var e=c+" {";jQuery.each(d,function(f,g){e+=f+":"+g+";\n"});e+="};";b.append(e)},findColor:function(e,c,f){c=c||"color";f=f||null;var d=/rgba*\(\d+,\d+,\d+,0\)/;while(e!=document){var b=window.getComputedStyle(e);if(b){var g=b[c];g=g.replace(/\s/g,"");if(g!=="transparent"&&!d.test(g)){return g}}e=e.parentNode}return f},loadAssets:function(c,b){c=Object.ensureArray(c);if(c.length==0&&Object.isFunction(b)){b();return}c.each(function(d){d.options.method=d.options.method||"get";var e={onSuccess:d.options.onSuccess||null,onFailure:d.options.onFailure||null};var f=function(h,g){if(e[h]){try{e[h](g)}catch(i){if(typeof console!="undefined"){console.log("Error in callback after loading "+d.url);console.log(i)}}}d.ready=true;if(c.pluck("ready").all()&&Object.isFunction(b)){b()}};d.options.onSuccess=f.curry("onSuccess");d.options.onFailure=f.curry("onFailure");new Ajax.Request(d.url,d.options)})},log:function(b){if(PKG.Common._defaultLogger==null){PKG.Common._defaultLogger=new PKG.Common.Logger()}PKG.Common._defaultLogger.debug(b)},logViaHistoryService:function(d,c,b,f){var e=new PKG.HttpURL("/.cm4all/e/Editor/action=log/;translate=skipProcess$3Dtrue");e.setParameter("category",d);e.setParameter("type",c);new Ajax.Request(e.toExternalForm(),{method:"post",contentType:"application/json",postBody:b?Object.toJSON(b):"{}",onComplete:function(g){if(typeof f=="function"){f(g)}}})},doubleTapToGo:function(b){if(navigator.userAgent.match(/iPhone|iPad|iPod/)&&Number((navigator.userAgent.match(/OS (\d+)_(\d+)/)||false)[1])<=7){return}(function(e,d,c,f){e.fn.doubleTapToGo=function(g){if(!("ontouchstart" in d)&&!navigator.msMaxTouchPoints&&!navigator.userAgent.toLowerCase().match(/windows phone os 7/i)){return false}this.each(function(){var h=false;e(this).on("click",function(j){var i=e(this);if(i[0]!=h[0]){j.preventDefault();h=i}});e(c).on("click touchstart MSPointerDown",function(m){var l=true,j=e(m.target).parents();for(var k=0;k<j.length;k++){if(j[k]==h[0]){l=false}}if(l){h=false}})});return this}})(jQuery,window,document);jQuery(b).doubleTapToGo()},openFullscreen:function(l,r){r=r||{};if(r.width&&/px$/.test(r.width)){r.width=Number(/(.*)px$/.exec(r.width)[1])}if(r.height&&/px$/.test(r.height)){r.height=Number(/(.*)px$/.exec(r.height)[1])}if(r.width&&r.height&&!/%$/.test(r.width)){var k=document.viewport.getDimensions();k.width=k.width-40;k.height=k.height-40;if(r.width>k.width&&!(/x/i).test(r.scrollbars)){var c=r.height/r.width;r.width=k.width;r.height=r.width*c}if(r.height>k.height&&!(/y/i).test(r.scrollbars)){var c=r.width/r.height;r.height=k.height;r.width=r.height*c}}var d;var o;var n;var q;var b;var i;var p;var f;var m;var j;var g;var h={"top-left":null,"top-right":null,"bottom-right":null,"bottom-left":null,"left-spacer":null,"right-spacer":null,"top-spacer":null,"bottom-spacer":null};if(Object.isElement(l)){l=$(l);j=l.up();g=l.next()}var e=function(){jQuery(".cm-fullscreen.scrollbars.scrollbars-x.scrollbars-y").css({overflow:"hidden"});setTimeout(function(){jQuery(".cm-fullscreen.scrollbars.scrollbars-x.scrollbars-y").css({overflow:"auto"})},30)};jQuery(window).resize(e);o=new Element("div",{"class":"cm-fullscreen padding1"}).insert(new Element("div",{"class":"cm-fullscreen padding2"}).insert(n=new Element("div",{"class":"cm-fullscreen padding3"})));i=new Element("div",{"class":"cm-fullscreen container"});p=new Element("div",{"class":"cm-fullscreen background"});jQuery(p).css("opacity","0.5");q=new Element("div",{"class":"cm-fullscreen justify"}).insert(b=new Element("div",{"class":"cm-fullscreen justify1"}));f=new Element("div",{"class":"cm-fullscreen content"});lscrollbars=new Element("div",{"class":"cm-fullscreen scrollbars"});d=new Element("div",{"class":"cm-fullscreen inner"});if((/x/i).test(r.scrollbars)){lscrollbars.addClassName("scrollbars-x")}if((/y/i).test(r.scrollbars)){lscrollbars.addClassName("scrollbars-y")}m=new Element("div",{"class":"cm-fullscreen close"});m.observe("click",function(){jQuery(window).unbind("resize",e);if(j){j.insertBefore(l,g||null)}var s=i.select("iframe");s.each(function(u,t){try{u.src="about:blank"}catch(v){Common.log(v.message)}});i.remove()});Object.keys(h).each(function(s){h[s]=new Element("div",{"class":"cm-fullscreen shadow"}).addClassName(s)});if(r.width){if(/%$/.test(r.width)){f.setStyle({width:r.width,left:((100-Number(/(.*)%$/.exec(r.width)[1]))/2)+"%"}).addClassName("percent-width")}else{if("auto"===r.width){f.addClassName("auto-width")}else{q.setStyle({width:r.width+"px"});if((/x/i).test(r.scrollbars)){d.setStyle({minWidth:r.width+"px"})}i.addClassName("fixed-width")}}}else{if(r.left&&r.right){f.setStyle({left:r.left+"px",right:r.right+"px"})}else{throw new Error("Illegal Arguments: either options.width or options.left/options.right must be set")}}if(r.height){if(/%$/.test(r.height)){f.setStyle({height:r.height,top:((100-Number(/(.*)%$/.exec(r.height)[1]))/2)+"%"}).addClassName("percent-height")}else{if("auto"===r.height){f.addClassName("auto-height")}else{q.setStyle({height:r.height+"px"});if((/y/i).test(r.scrollbars)){d.setStyle({minHeight:r.height+"px"})}i.addClassName("fixed-height")}}}else{if(r.top&&r.bottom){f.setStyle({top:r.top+"px",bottom:r.bottom+"px"})}else{throw new Error("Illegal Arguments: either options.height or options.top/options.bottom must be set")}}i.insert(p);Object.keys(h).each(function(s){f.insert(h[s])});i.insert(o);n.insert(q);b.insert(f);f.insert(lscrollbars);lscrollbars.insert(d);d.insert(l);f.insert(m);$(document.body).insert(i);return d},openFullscreenImage:function(d,c){c=c||{};c.minHeight=c.minHeight||100;c.minWidth=c.minWidth||100;var f="cm4all-common-fullscreen-image-"+((new Date().getTime()+Math.random()).toString(32).replace(/\./,"-"));var b=PKG.Common.openFullscreen("<img id='"+f+"' style='visibility:hidden' />",{width:"auto",height:"auto"});var e=jQuery("#"+f);e.load(function(){a.call(this,c)});e.prop("src",d);return b},plusSlides:function(b,d,f,c){d=(d+b.length)%b.length;var e=jQuery("#"+f);e.css("width","");e.unbind("load").load(function(){a.call(this,c)});e.prop("src",b[d]);jQuery(".cm-fullscreen.next").unbind("click").click(function(){Common.plusSlides(b,d+1,f,c)});jQuery(".cm-fullscreen.prev").unbind("click").click(function(){Common.plusSlides(b,d-1,f,c)})},openFullscreenImageSlideshow:function(b,e,d){d=d||{};e=e||0;d.minHeight=d.minHeight||100;d.minWidth=d.minWidth||100;var h="cm4all-common-fullscreen-image-"+((new Date().getTime()+Math.random()).toString(32).replace(/\./,"-"));var g='<div id="myModal" class="cm-fullscreen modal"> <div class="cm-fullscreen modal-content">';g+='<img id="'+h+'" style="visbility:hidden">';g+='<a class="cm-fullscreen prev"></a><a class="cm-fullscreen next"></a></div></div>';var c=PKG.Common.openFullscreen(g,{width:"auto",height:"auto"});var f=jQuery("#"+h);f.load(function(){a.call(this,d)});f.prop("src",b[e]);jQuery(".next").click(function(){Common.plusSlides(b,(e+1)%b.length,h,d)});jQuery(".prev").click(function(){Common.plusSlides(b,(e-1)%b.length,h,d)});return c},callbackFunc:function(b,d,c){if(c.script.importDone){return}if(!c.skipCheck&&c.script.readyState&&c.script.readyState!="loaded"&&c.script.readyState!="complete"){return}c.script.importDone=true;d.paylord=d.paylord.findAll(function(f){return Object.toJSON(f)!=Object.toJSON(b)});if(d.paylord.length==0){if(typeof(c.callback)=="function"){c.callback()}return}if(!c.isParallel){PKG.Common.requireLibrary.bind(this,d.paylord,c.callback).defer()}},hintingHandler:function(){var b=function(i,h,f){var e=false;var g={"cm-pixel-small":function(j){return j<200},"cm-pixel-medium":function(j){return j>=200&&j<400},"cm-pixel-large":function(j){return j>=400},"cm-pixel-xlarge":function(j){return j>=550}};var d={"cm-container-small":g["cm-pixel-small"],"cm-container-medium":g["cm-pixel-medium"],"cm-container-large":g["cm-pixel-large"],"cm-container-xlarge":g["cm-pixel-xlarge"],"cm-container-no-columns-2":function(j){return j<660},"cm-container-no-columns-3":function(j){return j>=660&&j<740},"cm-container-4-columns-to-2":function(j){return j>=660&&j<1060}};var c=function(n,k,m){var j=jQuery(m);var l=j.width();jQuery.each(n,function(o,p){if(p(l)){j.addClass(o)}else{if(o=="cm-container-4-columns-to-2"&&j.hasClass("cm-container-4-columns-to-2")){e=true}j.removeClass(o)}})};if(h){jQuery(h).filter(".cm_widget").each(c.curry(g));jQuery(h).filter(".content_main_dho, [data-cm-hintable], [cm_type], #mobileContent, .cm_column").each(c.curry(d))}else{jQuery(".cm_widget",f).each(c.curry(g));jQuery(".content_main_dho, [data-cm-hintable], [cm_type], #mobileContent, .cm_column",f).each(c.curry(d))}if(e){document.querySelectorAll(".cm_column_wrapper").forEach(function(j){j.style.display="block";window.setTimeout(function(){j.style.display=""},0)})}};return PKG.Common.notTooOften(null,b)}(),emptyHandler:function(d){if(!window.beng||!beng.env){return}if(beng.env.mode!="edit"&&!beng.env.hideEmptyAreas){return}var e="cm_empty";if(beng.env.mode=="edit"){e="cm_empty_editor"}var c=document.querySelectorAll("[cm_type=title], [cm_id=title], [cm_id=subtitle], [id=title], [id=subtitle], .title, .subtitle");[].forEach.call(c,function(f){if(f.innerHTML.stripTags().strip().blank()||f.innerHTML=="&nbsp;"||f.textContent==f.getAttribute("cm_defaultText")){if(beng.env.hideEmptyAreas){f.addClassName(e)}else{f.removeClassName(e)}}});var b=document.querySelectorAll("[cm_type=sidebar], .sidebar, [cm_type=footer], #footer");[].forEach.call(b,function(f){if(!f.querySelector(".cm_widget")&&!PKG.Common.containsTextNode_recourse(f)||f.textContent==f.getAttribute("cm_defaultText")){if(beng.env.hideEmptyAreas){f.addClassName(e)}else{f.removeClassName(e)}}});PKG.Common.updateCanBeEmptys();if(typeof cmEmptyApply==="function"){cmEmptyApply()}},updateCanBeEmptys:function(){if(!window.beng||!beng.env){return}if(beng.env.mode!="edit"&&!beng.env.hideEmptyAreas){return}var f="cm_empty";if(beng.env.mode=="edit"){f="cm_empty_editor"}canBeEmptys=document.querySelectorAll(".cm_can_be_empty");for(var d=0;d<canBeEmptys.length;d++){var e=canBeEmptys[d];var b=e.querySelectorAll("[cm_type=title], [cm_id=title], [cm_id=subtitle], [id=title], [id=subtitle], .title, .subtitle, [cm_type=sidebar], .sidebar, [cm_type=footer], #footer, [cm_type=keyvisual], #keyvisual, [cm_type=logo], #logo");if(b.length<=0){continue}var g=true;for(var c=0;c<b.length&&g;c++){if((e.getAttribute("cmtype")=="keyvisual"||e.id=="keyvisual")&&!e.classList.contains("cm_empty")&&!e.classList.contains("cm_empty_editor")){g=false}else{for(var c=0;c<b.length&&g;c++){if(!b[c].classList.contains("cm_empty")&&!b[c].classList.contains("cm_empty_editor")){g=false;break}}}}if(g){e.addClassName(f)}else{e.removeClassName(f)}}},containsTextNode_recourse:function(d){var c,e;var b=d.childNodes;for(c=0;c<b.length;c++){e=b[c];if(e.nodeType==Node.ELEMENT_NODE){if(e.getAttribute("cm_dont_save")=="true"||e.getAttribute("id")=="dropmarker"){continue}if(PKG.Common.containsTextNode_recourse(e)){return true}}else{if(e.nodeType==Node.TEXT_NODE){if(jQuery.trim(e.nodeValue)==""){continue}return true}}}return false},getOrCreateHeadElement:function(){var c=$$("head");if(c.first()){return c.first()}var b=new Element("head");$$("html").first().insert({top:b});return b}});Object.extend(PKG.Common,{HISTORY_EVENT_CATEGORY_WIDGET:"editor-widget",HISTORY_EVENT_CATEGORY_DESIGN:"editor-design",HISTORY_EVENT_CATEGORY_SETTINGS:"editor-settings",HISTORY_EVENT_CATEGORY_MARKETING:"editor-marketing",HISTORY_EVENT_CATEGORY_PUBLISH:"editor-publish"});Object.extend(PKG.Common,{Logger:Class.create({_logMessages:"",_logLevel:null,initialize:function(b){this.context=b||""},debug:function(c){var b=$A(arguments);b.unshift(PKG.Common.Logger.DEBUG);this._log.apply(this,b)},info:function(c){var b=$A(arguments);b.unshift(PKG.Common.Logger.INFO);this._log.apply(this,b)},warn:function(c){var b=$A(arguments);b.unshift(PKG.Common.Logger.WARN);this._log.apply(this,b)},error:function(c){var b=$A(arguments);b.unshift(PKG.Common.Logger.ERROR);this._log.apply(this,b)},fatal:function(c){var b=$A(arguments);b.unshift(PKG.Common.Logger.FATAL);this._log.apply(this,b)},setLogLevel:function(b){this._logLevel=b},getLogLevel:function(){return this._logLevel},_log:function(f,e){if(!PKG.Common.Logger.isEnabled()){return}var b=this.getLogLevel()||PKG.Common.Logger.getLogLevel();if(f[0]<b[0]){return}var d=(new Date().toString()+(this.context?" ["+this.context+"]":" [<default>]")+" "+f[1]+": "+e);if(typeof console!="undefined"&&!Object.isUndefined(console.log)){console.log(d);for(var c=2;c<arguments.length;c++){console.log(arguments[c])}}}})});Object.extend(PKG.Common.Logger,{DEBUG:[0,"DEBUG"],INFO:[1,"INFO"],WARN:[2,"WARN"],ERROR:[3,"ERROR"],FATAL:[4,"FATAL"],DISABLED:[5,""],enable:function(){PKG.Common.Logger._enabled=true;getTopWindow().document.cookie="cm_debug=true"},isEnabled:function(){if(typeof(PKG.Common.Logger._enabled)=="undefined"){if(typeof(getTopWindow)=="undefined"){return false}PKG.Common.Logger._enabled=false;var d=getTopWindow().document.cookie;var b=d.indexOf("cm_debug=");if(b>=0&&d.substring(b+9,b+9+4)=="true"){PKG.Common.Logger._enabled=true}}return PKG.Common.Logger._enabled},setLogLevel:function(b){PKG.Common.Logger._logLevel=b;getTopWindow().document.cookie="cm_debug_level="+b[1]},getLogLevel:function(){if(typeof(PKG.Common.Logger._logLevel)=="undefined"){if(typeof(getTopWindow)=="undefined"){return false}PKG.Common.Logger._logLevel=null;var e=getTopWindow().document.cookie;var b=e.indexOf("cm_debug_level=");if(b>=0){var d=e.indexOf(";",b);PKG.Common.Logger._logLevel=PKG.Common.Logger[e.substring(b+15,d!=-1?d:e.length)]}}return PKG.Common.Logger._logLevel||PKG.Common.Logger.DEBUG}});Object.extend(PKG.Common,{Lib:{_:(window.beng&&window.beng.env&&window.beng.env.common_prefix?window.beng.env.common_prefix:"")}});Object.extend(PKG.Common.Lib,{scriptaculous:{builder:[PKG.Common.Lib._+"/res/js/thirdparty/scriptaculous-1.8/builder.js"],effects:[PKG.Common.Lib._+"/res/js/thirdparty/scriptaculous-1.8/effects.js"],slider:[PKG.Common.Lib._+"/res/js/thirdparty/scriptaculous-1.8/slider.js"],sound:[PKG.Common.Lib._+"/res/js/thirdparty/scriptaculous-1.8/sound.js"],unittest:[PKG.Common.Lib._+"/res/js/thirdparty/scriptaculous-1.8/unittest.js"],dragdrop:[PKG.Common.Lib._+"/res/js/thirdparty/scriptaculous-1.8/effects.js",PKG.Common.Lib._+"/res/js/thirdparty/scriptaculous-1.8/dragdrop.js"],controls:[PKG.Common.Lib._+"/res/js/thirdparty/scriptaculous-1.8/effects.js",PKG.Common.Lib._+"/res/js/thirdparty/scriptaculous-1.8/controls.js"]},jquery:{ui:[PKG.Common.Lib._+"/res/js/thirdparty/jquery-ui-1.8/ui/minified/jquery-ui.min.js",PKG.Common.Lib._+"/res/js/thirdparty/jquery-ui-1.8/ui/i18n/jquery-ui-i18n.js"],ui_datepicker:[PKG.Common.Lib._+"/res/js/thirdparty/jquery-ui-1.8/ui/minified/jquery.ui.core.min.js",PKG.Common.Lib._+"/res/js/thirdparty/jquery-ui-1.8/ui/minified/jquery.ui.datepicker.min.js",PKG.Common.Lib._+"/res/js/thirdparty/jquery-ui-1.8/ui/i18n/jquery-ui-i18n.js"]}});Object.extend(PKG.Common,{Css:{jquery:{ui:[PKG.Common.Lib._+"/res/js/thirdparty/jquery-ui-1.8/themes/base/jquery.ui.all.css"],ui_datepicker:[PKG.Common.Lib._+"/res/js/thirdparty/jquery-ui-1.8/themes/base/jquery.ui.base.css",PKG.Common.Lib._+"/res/js/thirdparty/jquery-ui-1.8/themes/base/jquery.ui.datepicker.css"],ui_theme:[PKG.Common.Lib._+"/res/js/thirdparty/jquery-ui-1.8/themes/base/jquery.ui.theme.css"]}}});window.Common=PKG.Common;window.Common.Logger=PKG.Common.Logger;jQuery(document).on("ready load",PKG.Common.hintingHandler).on("pageshow",function(b){PKG.Common.hintingHandler.call(this,b)});jQuery(window).on("resize transitionend webkitTransitionEnd",PKG.Common.hintingHandler);jQuery(document).on("ready load",PKG.Common.emptyHandler).on("pageshow",function(b){PKG.Common.emptyHandler.call(this,b)});jQuery(window).one("touchstart",function(){jQuery(document.body).addClass("cm4all-touch-device")});jQuery(document).one("ready",function(){const c=document.createElement("IFRAME");c.src="data:text/html,%3Cdiv%20style%3D%22width%3A%20100%25%3Bheight%3A200px%3B%22%3E%3C%2Fdiv%3E";function b(){c.removeEventListener("error",d);var e=c.clientHeight-1;c.style.height=e+"px";var f=c.clientHeight;c.parentNode.removeChild(c);if(f!==e){jQuery(document.body).addClass("cm4all-iframe-not-sizable")}}function d(e){c.removeEventListener("load",b);c.removeEventListener("error",d);c.parentNode.removeChild(c)}c.addEventListener("load",b);c.addEventListener("error",d);document.body.appendChild(c)});window.createBengRequestUrl=function(c,g,p,f,o,q,j){function d(u){var t=/\+/g;var r=/%20/g;var e=/'/g;u=encodeURIComponent(u);return u.replace(t,"%2B").replace(r,"+").replace(e,"%27")}p=(p||{});g=(g||{});f=(f||{});var i="";var l="";var b,m;for(b in p){i+=b+"="+p[b]+"&"}for(b in f){l+=b+"="+f[b]+"&"}i=d(i);var n=/%/g;i=i.replace(n,"$");for(var b in g){m=d(g[b]);m=m.replace(n,"$");c+="/"+b+"="+m}if(i){c+="/header="+i}if(!o){c+="/cc="+new Date().getTime()}var h="";try{h=getTopWindow().urlSessionId||""}catch(k){}c=beng_widget_uri(c,h,null,typeof q=="string"?q:null,j||null,null,(l!=""?l:null));return c}})((function(){if(typeof LIBCM4ALL_JS_WIDGET_NAMESPACE=="object"){return LIBCM4ALL_JS_WIDGET_NAMESPACE}if(typeof(window.cm4all)=="undefined"){window.cm4all={}}return window.cm4all})())}if(window.__loadedJsLibraries["/res/js/lib/Common.Widget.js"]!==true){window.__loadedJsLibraries["/res/js/lib/Common.Widget.js"]=true;(function(PKG){Object.extend(PKG.Common,{Widget:Class.create({initialize:function(a){this.definition=a||{};this.__dirty=0;PKG.Common.EventDispatcher.registerListener(PKG.Common.Event.WidgetConf,function(b){if(!Object.isUndefined(window.currentWidgetConf)){++this.__dirty}}.bind(this))},doRequest:function(b,c,h,a){var g=new PKG.HttpURL(this.createUrl(b,a));var i=$H(c||{});var d=i.get("parameters")||{};var e=null;var f;d=$H(Object.isString(d)?d.toQueryParams():d);g.setParameters(h);g.setParameters(d);e=g.getPrototypePair();if(i.get("postBody")){f=g.toExternalForm()}else{f=e.url;i.set("parameters",e.parameters)}return new Ajax.Request(f,i.toObject())},invokeXlate:function(c,b,a){Xlate.invoke({namespace:this.getCatalogNameFromClassId(),language:c,country:b,callback:a,urlGenerator:function(f,d,g,e){return this.createUrl("res/LC_MESSAGES/"+g+(e?"_"+e:"")+d+".js")}.bind(this)})},getCatalogNameFromClassId:function(){if(!this.definition.classId){throw new Error("definition.classId must be set!")}return this.definition.classId.split(/\./).last().sub(/^./,function(a){return a[0].toLowerCase()})},getLocale:function(){var c,a,b,g;try{try{c=cm4all.Common.Widget.getEditro()}catch(f){Common.log(f)}if(c){var d=c.getXlate();if(d){return{language:d.language,country:d.country}}}a=window.locale||parent.locale||navigator.language||navigator.browserLanguage;if(a){b=a.split(/[-_]/);g;if(b.length<2){switch(b[0]){case"en":g="US";break;default:g=b[0].toUpperCase()}}else{g=b[1]}return{language:b[0],country:g}}}catch(f){Common.log(f);return{language:"en",country:"US"}}return{language:"en",country:"US"}},loadGuiRenderer:function(c,a,e){var b=this;var d=function(){var f={css:[],js:[]};try{f=jQuery.cm4all.guilib.bootstrap.data;if(!f){throw new Error("No data")}}catch(g){PKG.Common.log("No guilib bootstrap data found");try{f=PKG.Common.Widget.getMainWindow().jQuery.cm4all.guilib.bootstrap.data}catch(g){PKG.Common.log("No guilib bootstrap data found in main window")}}if(typeof f.css=="string"){f.css=[f.css]}if(e!==true){f.css.push("/.cm4all/e/dynamic/ui-theme.css")}PKG.Common.loadCss(f.css);PKG.Common.requireLibrary(f.js,function(){var h=function(){var i;if(window.cm4all.ui.OPTIONS&&window.cm4all.ui.OPTIONS.RENDER_MODE){i=b.getLocale();Xlate.invoke({namespace:"guilib",language:i.language,country:i.country,callback:function(r){var p=!jQuery.isEmptyObject(r.data)?r:{};p[window.cm4all.ui.OPTIONS.I18N_LANGUAGE]=i.language;p[window.cm4all.ui.OPTIONS.I18N_COUNTRY]=i.country;jQuery.cm4all.guilib.getRenderer().setOption(window.cm4all.ui.OPTIONS.I18N,p);if(a===false){if(Object.isFunction(c)){c(jQuery)}}else{var s={};s[window.cm4all.ui.OPTIONS.RENDER_MODE]=window.cm4all.ui.VALUES.RENDER_MODE_CONFIG;var q=null;try{q=PKG.Common.Widget.getEditro()}catch(n){}var m=q&&q.getStub()||null;if(m&&m.skin=="toi"){try{if(b.definition&&b.definition.base&&b.definition.base.indexOf("action=showNotifications")!=-1){s[window.cm4all.ui.OPTIONS.RENDER_MODE]=window.cm4all.ui.VALUES.RENDER_MODE_INLINE}}catch(n){}}s[window.cm4all.ui.OPTIONS.ERROR_CALLBACK]=function(u){window.console&&window.console.error&&window.console.error(u)};if(window.currentWidgetConf&&window.currentWidgetConf.options){s[window.cm4all.ui.OPTIONS.DIALOG_TITLE]=window.currentWidgetConf.options.dialogTitle;if(window.currentWidgetConf.options.dialogSize){var o=window.currentWidgetConf.options.dialogSize.height;var t=window.currentWidgetConf.options.dialogSize.width;var l;if(t<=400&&o<=150){l="xsmall"}else{if(t<=400){l="small"}else{if(t<=600){l="medium"}else{l="large"}}}s[window.cm4all.ui.OPTIONS.DIALOG_PREFERRED_SIZE]=l}}if(parent.closeWidgetConfiguration){s[window.cm4all.ui.OPTIONS.DIALOG_CLOSE_ACTION]=parent.closeWidgetConfiguration.bind(parent,false)}if(Object.isFunction(c)){s[window.cm4all.ui.OPTIONS.RENDER_CALLBACK]=c}window.cm4all.ui.adapt(jQuery(a||"form:first"),s)}}})}else{try{window.cm4all.ui.overlay(jQuery('<div id="io-'+(new Date().getTime())+'"></div>'),{autoShow:false})}catch(k){PKG.Common.log(k.message)}if(a===false){if(Object.isFunction(c)){c(jQuery)}}else{var j={};j[jQuery.cm4all.guilib.theme.OPTIONS.ERROR_CALLBACK]=function(l){window.console&&window.console.error&&window.console.error(l)};j[jQuery.cm4all.guilib.theme.OPTIONS.RENDER_CALLBACK]=Object.isFunction(c)?c:function(){};j[jQuery.cm4all.guilib.theme.OPTIONS.IS_WIDGET_CONFIG]=true;if(jQuery.cm4all.guilib.themes.generic.OPTIONS.DIALOG_CLOSE_ACTION){j[jQuery.cm4all.guilib.themes.generic.OPTIONS.DIALOG_CLOSE_ACTION]=parent.closeWidgetConfiguration?parent.closeWidgetConfiguration.bind(parent,false):false}jQuery.cm4all.guilib.theme.adapt(jQuery(a||"form:first"),j)}}};if(document.readyState!="loading"){h()}else{document.addEventListener("DOMContentLoaded",h)}})};d()},loadWidgetRuntime:function(a,b){PKG.Common.requireLibrary(b||[],a)},createUrl:function(b,a){if(typeof(beng_widget_uri)!="undefined"&&Object.isFunction(beng_widget_uri)){return beng_widget_uri(this.definition.base,this.definition.session,this.definition.frame,this.definition.path,"partial",b?b:null,null,null)}if(this.__dirty>0){b=b.replace(/\/cc=([0-9]+)/,"/cc=$1_"+this.__dirty)}return b},createStaticClassUrl:function(a){if(!this.definition.classId){throw new Error("definition.classId must be set!")}return"/.cm4all/widgetres.php/"+this.definition.classId+(a.indexOf("/")!=0?"/":"")+a},createCommonUrl:function(a){if(window.beng&&window.beng.env&&window.beng.env.common_prefix){return window.beng.env.common_prefix+a}return a},fireEvent:function(f,g){var b=this.definition.frame;var a=cm4all.Common.Widget.getEditro();var c=a.widgetCatalog[b].wcid;var e=cm4all.Common.Widget.getMainWindow().beng.WidgetManager.getInstance(c,b);g.unshift(e);g.unshift(a);var d=new f(a,e);d.initialize.apply(d,g);PKG.Common.EventDispatcher.fireEvent(d)},setWidgetMaxWidth:function(c,a){if(!this.definition.wiid){throw new Error("definition.wiid must be set!")}var b="";var d="";if(a){b="@media "+a+" {";d="}"}jQuery("<style type='text/css'>"+b+" #widgetcontainer_"+this.definition.wiid+"{max-width: "+c+" !important;}"+d+"</style>").appendTo("head")},setWidgetToBlock:function(a){if(!this.definition.wiid){throw new Error("definition.wiid must be set!")}var b="";var c="";if(a){b="@media "+a+" {";c="}"}jQuery("<style type='text/css'>"+b+" #widgetcontainer_"+this.definition.wiid+"{width: 100% !important; max-width: 100% !important;}"+c+"</style>").appendTo("head")}})});Object.extend(PKG.Common.Widget,{getEditro:function(){var a=Try.these(function(){return cm4all.Editro.getInstance()},function(){return parent.cm4all.Editro.getInstance()},function(){return parent.parent.cm4all.Editro.getInstance()},function(){return controlpanel.getEditorWnd().cm4all.Editro.getInstance()},function(){return top.frames["main-frame"].cm4all.Editro.getInstance()},function(){return top.frames.editorWebsiteIFrame.cm4all.Editro.getInstance()})||null;if(!a){throw new Error("No editor context found! (Are you trying to access editor in published website?)")}return a},getMainWindow:function(){var a=null;try{a=PKG.Common.Widget.getEditro()}catch(b){}if(a){return a.getMainWindow()}else{Common.log("Falling back to 'getTopWindow()'!");return getTopWindow()}},getPopupImpl:function(){var a=Try.these(function(){return PKG.Common.Widget.getEditro().getStub().getPopupImpl()},function(){return new (Common.Widget.getMainWindow()).cm4all.Infrastructure.GuistrapPopup()},function(){return new cm4all.Infrastructure.GuistrapPopup()},function(){return new cm4all.Infrastructure.GuilibPopup()});return a}});if(PKG===window.cm4all&&!PKG.Common.Event){Object.extend(PKG.Common,{Event:Class.create({__isEvent:true,clsid:"PKG.Common.Event",initialize:function(a){this.__source=a},getSource:function(){return this.__source}})});cm4all.Common.Event.WidgetConf=Class.create(cm4all.Common.Event,{clsid:"cm4all.Common.Event.WidgetConf",initialize:function($super,a){$super(a)}})}if(PKG===window.cm4all&&!PKG.Common.EventDispatcher){Object.extend(PKG.Common,{EventDispatcher:{__id:new Date().toTimeString()+Math.random(),__eventListeners:{},fireEvent:function(f,e){var d,h,b,a,c;var g=window;do{c=g.cm4all.Common;if(c){d=f.constructor;do{h=c.EventDispatcher.__eventListeners[d.prototype.clsid]||(c.EventDispatcher.__eventListeners[d.prototype.clsid]=[]);if(h){for(b=0;b<h.length;b++){if(!e){h[b].call(g,f)}else{(function(){var j=g;var i=h[b];j.setTimeout(function(){i.call(j,f)},0)})()}}}}while(d=d.superclass)}a=g;g=g.parent}while(a!=g&&g.cm4all&&g.cm4all.Common)},registerListener:function(c,b){if(!c.prototype.__isEvent){throw new Error("Not an Event class: "+c.toString())}var a=PKG.Common;var d=a.EventDispatcher.__eventListeners[c.prototype.clsid]||(a.EventDispatcher.__eventListeners[c.prototype.clsid]=[]);d.push(b)},deregisterListener:function(d,c){if(!d.prototype.__isEvent){throw new Error("Not an Event class: "+d.toString())}var b=PKG.Common;var e=b.EventDispatcher.__eventListeners[d.prototype.clsid]||(b.EventDispatcher.__eventListeners[d.prototype.clsid]=[]);var a;for(a=e.length-1;a>=0;a--){if(c===e[a]){e.splice(a,1)}}}}})}window.Common.Widget=PKG.Common.Widget})((function(){if(typeof LIBCM4ALL_JS_WIDGET_NAMESPACE=="object"){return LIBCM4ALL_JS_WIDGET_NAMESPACE}if(typeof(window.cm4all)=="undefined"){window.cm4all={}}return window.cm4all})())}if(window.__loadedJsLibraries["/res/js/lib/Common.MobileBrowserSwitch.js"]!==true){window.__loadedJsLibraries["/res/js/lib/Common.MobileBrowserSwitch.js"]=true;(function(PKG){Object.extend(PKG.Common,{MobileBrowserSwitch:{mobileAgents:["iphone","ipod","blackberry","pre/","palm","hiptop","avantgo","plucker","xiino","blazer","elaine","bada/","kindle","android","iris","3g_t","windows ce","windows phone","iemobile","opera mini","opera mobi"],isMobileAgent:function(b){var a;b=b.toLowerCase();for(a=0;a<MobileBrowserSwitch.mobileAgents.length;a++){if(b.indexOf(MobileBrowserSwitch.mobileAgents[a])!=-1){return true}}return false}}});window.MobileBrowserSwitch=PKG.Common.MobileBrowserSwitch})((function(){if(typeof LIBCM4ALL_JS_WIDGET_NAMESPACE=="object"){return LIBCM4ALL_JS_WIDGET_NAMESPACE}if(typeof(window.cm4all)=="undefined"){window.cm4all={}}return window.cm4all})())}if(window.__loadedJsLibraries["/res/js/lib/Strftime.js"]!==true){window.__loadedJsLibraries["/res/js/lib/Strftime.js"]=true;(function(PKG){PKG.Strftime=({});Object.extend(PKG.Strftime,{Date:({fromUtcIso:function(a){return PKG.Strftime.Date.fromIso(a,true)},fromIso:function(b,a){return PKG.Strftime.Date._fromPattern(b,[0,4,5,7,8,10,11,13,14,16,17,19],a)},fromUtcTimestamp:function(a){return PKG.Strftime.Date.fromTimestamp(a,true)},fromTimestamp:function(b,a){return PKG.Strftime.Date._fromPattern(b,[0,4,4,6,6,8,8,10,10,12,12,14],a)},_fromPattern:function(b,c,a){return function(j,e,h,g,i,f){return(a?new Date(Date.UTC(j,e,h,g,i,f)):new Date(j,e,h,g,i,f))}.apply(this,[b.substring(c[0],c[1]),b.substring(c[2],c[3])-1,b.substring(c[4],c[5]),b.substring(c[6],c[7]),b.substring(c[8],c[9]),b.substring(c[10],c[11])])}}),format:function(p,q,m,n){var f=p;var r=PKG.Strftime.getConfig(m,n);var a=q.getFullYear();var k=q.getMonth();var h=q.getDate();var c=q.getDay();var j=q.getHours();var s=q.getMinutes();var b=q.getSeconds();var g=""+a;var l=(j>12?j-12:(j==0?12:j));var e=(j>=12?"PM":"AM");var d=[/%a/g,r.dayNames[c].substring(0,r.dayShortcutLength),/%A/g,r.dayNames[c],/%b/g,r.monthNames[k].substring(0,r.monthShortcutLength),/%B/g,r.monthNames[k],/%d/g,(h<10?"0":"")+h,/%e/g,(h<10?" ":"")+h,/%H/g,(j<10?"0":"")+j,/%I/g,(l<10?"0":"")+l,/%k/g,(j<10?" ":"")+j,/%l/g,(l<10?" ":"")+l,/%m/g,(k<9?"0":"")+(k+1),/%M/g,(s<10?"0":"")+s,/%n/g,"\n",/%p/g,e,/%S/g,(b<10?"0":"")+b,/%y/g,g.substring(2,4),/%Y/g,g];for(var o=0;o<d.length;o+=2){f=f.replace(d[o],d[o+1])}return f},getConfig:function(b,a){return(PKG.Strftime.configuration[b]||PKG.Strftime.configuration.en)},configuration:{de:{monthNames:["Januar","Februar","März","April","May","Juni","Juli","August","September","Oktober","November","Dezember"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],week:[1,2,3,4,5,6,0],monthShortcutLength:3,dayShortcutLength:2},en:{monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],week:[0,1,2,3,4,5,6],monthShortcutLength:3,dayShortcutLength:3},it:{monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayNames:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],week:[1,2,3,4,5,6,0],monthShortcutLength:3,dayShortcutLength:2},es:{monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],week:[0,1,2,3,4,5,6],monthShortcutLength:3,dayShortcutLength:2},pt:{monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayNames:["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"],week:[0,1,2,3,4,5,6],monthShortcutLength:3,dayShortcutLength:3},jp:{monthNames:["１月","２月","３月","４月","５月","６月","７月","８月","９月","１０月","１１月","１２月"],dayNames:["日","月","火","水","木","金","土"],week:[0,1,2,3,4,5,6],monthShortcutLength:100,dayShortcutLength:100},pl:{monthNames:["stycznia","lutego","marca","kwietnia","maja","czerwca","lipca","sierpnia","września","pazdziernika","listopada","grudnia"],dayNames:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"],week:[1,2,3,4,5,6,0],monthShortcutLength:3,dayShortcutLength:3}}});window.Strftime=PKG.Strftime})((function(){if(typeof LIBCM4ALL_JS_WIDGET_NAMESPACE=="object"){return LIBCM4ALL_JS_WIDGET_NAMESPACE}if(typeof(window.cm4all)=="undefined"){window.cm4all={}}return window.cm4all})())}if(window.__loadedJsLibraries["/res/js/lib/Xlate.js"]!==true){window.__loadedJsLibraries["/res/js/lib/Xlate.js"]=true;(function(PKG){PKG.Xlate=Class.create({namespace:null,language:null,country:null,data:null,initialize:function(a,d,b,c){this.namespace=a;this.language=d;this.country=b;this.data={}},setData:function(a){if(a!=null){this.data=a}},format:function(d,g){var e=this.data.translations;var c=null;var b=null;g=$H(g||{});c=e?e.get(d):d;if(c!=null){var a=d.indexOf("${#");if(a!=-1){b=g.get(d.substring(a+3,d.indexOf("}",a+3)))}if(b!=null){var f=e?e.get(d):d;if(!Object.isString(f)){c=$H(f).get(this.data.pluralrule(b))}}}if(!c){c=d}g.each(function(h){try{c=c.replace(new RegExp("\\$\\{\\#?"+h.key+"(%T:[^}]*)?\\}","g"),function(j,k){if(k&&k.length>3){return PKG.Strftime.format(k.substring(3),h.value,this.language,this.country)}return h.value}.bind(this))}catch(i){PKG.Common.log(c+"\n"+h.key+"\n"+this.namespace)}}.bind(this));return c},hasKey:function(b){var a=(!!(this.data.translations)&&(!!(this.data.translations.get(b)=="")||!!(this.data.translations.get(b))));return a},translateHTML:function(c,a){var b;if(a&&a.querySelectorAll){b=jQuery(a.querySelectorAll("[lang=x-late]"))}else{b=(a?c.jQuery(a).find("[lang^=x-late]"):c.jQuery("[lang^=x-late]"))}b.each(function(g,e,f){f=g.$(f);var h=PKG.Xlate._extractId(f);var d=this.format(h);if(d==h&&h.match(/&amp;/)){h=h.replace(/&amp;/,"&");d=this.format(h)}if(d){f.removeAttribute("xml:lang");f.setAttribute("lang",this.language+"-"+this.country);f.update(d);f.innerHTML=f.innerHTML}}.bind(this,c))}});Object.extend(PKG.Xlate,{data:new Hash(),xlates:new Hash(),invoke:function(c){var e=jQuery.Deferred();if(!Object.isArray(c.namespace)){c.namespace=[c.namespace]}var a=c.namespace.map(function(g){return PKG.Xlate.createRefId(g,c.language,c.country)});var b=a.map(function(g){return PKG.Xlate.xlates.get(g)});if(b.all()){c.callback(b[0]);e.resolve(b[0])}else{var f=c.namespace.map(function(h,g){var j=Prototype.K;if(Object.isFunction(c.urlGenerator)){j=c.urlGenerator}else{if(Object.isString(c.urlGenerator)){j=function(i){return c.urlGenerator+i}}else{if(Object.isArray(c.urlGenerator)){j=c.urlGenerator[g]||Prototype.K}}}return j});var d=b.map(function(j,g){if(j){return null}var h=c.namespace[g];return f[g]("/res/generated/i18n/"+c.language+"/"+c.country+"/"+h+".js",h,c.language,c.country)}).filter(Prototype.K);PKG.Common.requireLibrary(d,function(){var k=PKG.Xlate.data.get(a[0]);if(k){for(var g=1;g<c.namespace.length;g++){var j=PKG.Xlate.data.get(a[g]);if(j){PKG.Xlate.set(c.namespace[0],c.language,c.country,j.translations,true,k.pluralrule)}}}else{Common.log("po file not installed: "+a[0])}var h=new PKG.Xlate(c.namespace[0],c.language,c.country);h.setData(PKG.Xlate.data.get(a[0]));PKG.Xlate.xlates.set(a[0],h);c.callback(h);e.resolve(h)})}return e.promise()},set:function(b,h,f,e,d,g){var c=PKG.Xlate.createRefId(b,h,f);var a=(PKG.Xlate.data.get(c)||PKG.Xlate.data.set(c,{translations:new Hash(),pluralrule:new Hash()}));if(d){a.translations.update(e);a.pluralrule=g}else{PKG.Xlate.data.set(c,{translations:$H(e).update(a.translations),pluralrule:g})}},createRefId:function(a,c,b){return(c+"/"+b+"/"+a)},translateHTML:function(e,c,d,b){var a=new Hash();(b?Element.select(b,"[lang^=x-late-]"):$$("[lang^=x-late-]")).each(function(g){var f=g.readAttribute("lang").substring(7).replace(/-/g,".");if(!a.get(f)){a.set(f,true);PKG.Xlate.invoke({namespace:f,language:e,country:c,urlGenerator:d,callback:function(h){(b?Element.select(b,"[lang^=x-late-]"):$$("[lang^=x-late-]")).each(function(j){var k=PKG.Xlate._extractId(j);var i=h.format(k);if(i==k&&k.match(/&amp;/)){k=k.replace(/&amp;/,"&");i=h.format(k)}if(i){j.setAttribute("lang",h.language+"-"+h.country);j.update(i);j.innerHTML=j.innerHTML}})}})}})},_extractId:function(a){return PKG.Xlate._removeComments(a.cloneNode(true)).innerHTML.replace(/^\s*(.*?)\s*$/,"$1").replace(/\s+/g," ")},_removeComments:function(a){a=$(a);a.childElements().each(function(b){PKG.Xlate._removeComments(b)});if(a.nodeType==Node.COMMENT_NODE){a.remove()}return a}});window.Xlate=PKG.Xlate;window.I18N=({loaded:{},langObjects:{},language:(window.theLanguage||(document.documentElement.getAttribute("lang")||"").replace(/-.*$/,"")||getTopWindow().theLanguage||(getTopWindow().locale?getTopWindow().locale.replace(/_.*/,""):null)||(getTopWindow().beng&&getTopWindow().beng.env&&getTopWindow().beng.env.language?getTopWindow().beng.env.language:null)),country:(window.theCountry||(document.documentElement.getAttribute("lang")||"").replace(/^.*-/,"")||getTopWindow().theCountry||(getTopWindow().locale?getTopWindow().locale.replace(/.*_/,""):null)||(getTopWindow().beng&&getTopWindow().beng.env&&getTopWindow().beng.env.country?getTopWindow().beng.env.country:null)),setTextObject:function(a,e,d,h,g,f){PKG.Xlate.set(a,g,f,e,d,h);var c=PKG.Xlate.createRefId(a,g,f);var b=new PKG.Xlate(a,g,f);b.setData(PKG.Xlate.data.get(c));PKG.Xlate.xlates.set(c,b)},load:function(a,d,f,c){if(f){I18N.language=f}if(c){I18N.country=c}d=d||{};a=(a instanceof Array?a:[a]);var e=[];for(var g=0;g<a.length;g++){var j=I18N.language+"/"+I18N.country+"/"+a[g];if(!I18N._createXRefClosure(j)()){var h="/res/generated/i18n/"+j+".js";if(d.url){if(typeof(d.url)=="function"){h=d.url(h)}else{h=d.url+h}}e.push({url:h,test:I18N._createXRefClosure(j)})}}if(d.mode=="preload"){var b;while(e.length>0){b=e.shift();document.write('<SCRIPT src="'+b.url+'"></SCRIPT>')}}else{throw new Error("Operation not supported, use cm4all.Xlate object instead!")}},_createXRefClosure:function(a){return function(){return typeof I18N.langObjects[a]!="undefined"}},xlate:function(b,a,d){var c=PKG.Xlate.xlates.get(PKG.Xlate.createRefId(b,I18N.language,I18N.country));if(c){return c.format(a,d)}else{if(typeof getTopWindow=="function"&&getTopWindow()!=window&&getTopWindow().I18N){return getTopWindow().I18N.xlate(b,a,d)}else{return a}}}})})((function(){if(typeof LIBCM4ALL_JS_WIDGET_NAMESPACE=="object"){return LIBCM4ALL_JS_WIDGET_NAMESPACE}if(typeof(window.cm4all)=="undefined"){window.cm4all={}}return window.cm4all})())}if(window.__loadedJsLibraries["/res/js/lib/XSLTProcessor.js"]!==true){window.__loadedJsLibraries["/res/js/lib/XSLTProcessor.js"]=true;Transformer=Class.create({xslt:null,xml:null,_loadDocument:function(a){if(Prototype.Browser.IE){var c=new ActiveXObject("Microsoft.XMLDOM");c.async=false;c.load(a);return c}else{var b=new window.XMLHttpRequest();b.open("GET",a,false);b.send(null);return b.responseXML.documentElement}},setStylesheetUrl:function(a){this.xslt=this._loadDocument(a);return this},setDocumentUrl:function(a){this.setDocument(this._loadDocument(a));return this},setDocument:function(a){this.xml=a;return this},transform:function(d){var a;d=$(d);if(Prototype.Browser.IE){a=this.xml.transformNode(this.xslt)}else{var c=new XSLTProcessor();c.importStylesheet(this.xslt);var e=c.transformToDocument(this.xml);var b=new XMLSerializer();a=b.serializeToString(e.documentElement)}d.update(a)}})}if(window.__loadedJsLibraries["/res/js/lib/XFrameTunnel/Initiator.js"]!==true){window.__loadedJsLibraries["/res/js/lib/XFrameTunnel/Initiator.js"]=true;(function(a){a.cm4all=a.cm4all||{};cm4all.XFrameTunnelInitiator=Class.create({commands:null,alienFrame:null,alienOrigin:null,txnid:null,opener:null,initialize:function(e,d,b){var c=this;this.alienFrame=$(e);this.txnid=Math.random().toString(16).replace(/^0./,"");this.opener=d;this.commands=Object.extend(this,b||cm4all.XFrameTunnelInitiator.defaultCommands);this.messageHandler=this.messageHandler.bind(this);(typeof getTopWindow!=="undefined"&&getTopWindow()||top).addEventListener("message",this.messageHandler,false);a.addEventListener("unload",function(){c.free.call(c)})},messageHandler:function(e){var d=e.data;if(!d||d["xft-txnid"]!==this.txnid){return}var b=e.origin||e.originalEvent.origin;if(b!==this.alienOrigin){return}var g=d["xft-command"]||"";var f=d["xft-request"]||{};if(Object.isFunction(this.commands[g])){if(this.commands[g](f)){var c={"xft-txnid":this.txnid,"xft-command":g,"xft-response":{returnValue:"OK",data:f}};this.alienFrame.contentWindow.postMessage(c,b)}}else{console.log("INVALID COMMAND: "+g)}},open:function(c,b){if(c.indexOf("javascript:")==0){return}var e=new cm4all.HttpURL(c);HttpURLUtils.setReverseParameter(e,"xft-txnid",this.txnid);HttpURLUtils.setReverseParameter(e,"xft-base",cm4all.XFrameTunnelInitiator.getBaseUrl());HttpURLUtils.setReverseParameter(e,"xft-path",cm4all.XFrameTunnelInitiator.getPath());if(b){var d=function(){this.alienFrame.stopObserving("load",d);b(this.alienFrame.contentWindow)}.bind(this);this.alienFrame.observe("load",d)}this.alienFrame.src=e.toString();e.removeAllParams();e.path="";this.alienOrigin=e.toString()||(location.protocol+"//"+location.host)},free:function(){(typeof getTopWindow!=="undefined"&&getTopWindow()||top).removeEventListener("message",this.messageHandler)}});Object.extend(cm4all.XFrameTunnelInitiator,{defaultCommands:{"popup-open":function(e){var c=Object.extend(Object.extend({},e),{url:"javascript:void(0)"});var b=Common.Widget.getPopupImpl().custom(c).getFrame();if(b){var d=new cm4all.XFrameTunnelInitiator(b,this);d.open(e.url)}return false},"popup-close":function(d){Common.Widget.getPopupImpl().peek().close();if(this.opener){try{var b={"xft-txnid":this.opener.txnid,"xft-command":"popup-closed","xft-response":{returnValue:"OK",data:d}};this.opener.alienFrame.contentWindow.postMessage(b,this.alienOrigin)}catch(c){console.error(c)}}return false},"popup-closed":function(b){return true},resize:function(e){var c=jQuery(this.alienFrame);var b=c.parent();if(b.length<1){var f=this.alienFrame.id.substring(7,this.alienFrame.id.lastIndexOf("_"));b=jQuery("#widgetcontainer_"+f)}var d={};if(e.width&&isNaN(e.width)){d.width=e.width}else{if(e.width){d.width=e.width+"px"}}if(e.height&&isNaN(e.height)){d.height=e.height}else{if(e.height){d.height=e.height+"px"}}if(b.css("position")==="static"){d.position="relative"}b.css(d);c.css({position:"absolute"});if(e.overflow){this.alienFrame.setAttribute("scrolling",(e.overflow=="hidden")?"no":"auto")}return true},"get-wrapper-style":function(b){var c=jQuery(this.alienFrame).parent();jQuery.each(b,function(d,e){b[d]=c.css(d)});return b},getContainerClass:function(c){var b=jQuery(this.alienFrame).parent();var d=b.closest("[data-container-class]").data("data-container-class");if(!d){if(b.closest(".content_main").length>0){d="content_main"}else{if(b.closest(".content_main_dho").length>0){d="content_main_dho"}else{if(b.closest(".content_sidebar").length>0){d="content_sidebar"}else{if(b.closest(".content_mobile").length>0){d="content_mobile"}}}}}c.classname=d||"";return true},getCSS:function(f){var e=[];var b=document.getElementsByTagName("link");for(var d=0;d<b.length;d++){var c=b.item(d).href;if(c&&(c.match(/.*\/beng\/designs\/.*\.css/)||c.match(/.*\/1,css,8,1/)||c.match(/.*\/1,mcss,8,1/)||c.match(/.*\/vars\.css/)||c.match(/.*\/mvars\.css/)||c.match(/.*\/.cm4all\/e\/Design\/action=getCss.*/))){if(c.indexOf("/")==0){c="//"+document.location.host+c}e.push(c)}}f.cssUrls=e;return true}},getBaseUrl:function(){var b=new cm4all.HttpURL(document.location.href);b.ref=null;b.path="";return b.toString()},getPath:function(){var b=new cm4all.HttpURL(document.location.href);var c=b.path;c=c.replace(/;.*$/,"");return c},});DummyPopup=Class.create({initialize:function(g){g=g||{};var d=new HttpURL(g.url);var e=g.width||"80%";var c=g.height||"80%";var f=g.scrollbars||"";var b=/^\d+(px|%)$/;if(!b.test(e)||!b.test(c)||d.protocol!="http"&&d.protocol!="https"){alert("illegal parameter");return}this.popupDiv=Common.openFullscreen("<iframe style='width: 100%; height: 100%; border: none;' ></iframe>",{width:e,height:c,scrollbars:f});this.iframe=jQuery("iframe",this.popupDiv)[0]},close:function(){jQuery(".close",this.popupDiv.parent()).click()},resize:function(b,c){jQuery(this.iframe).parents(".cm-fullscreen.justify").css({width:b+"px",height:c+"px"})}})})(window)}if(window.__loadedJsLibraries["/res/js/lib/DOM2JSON.js"]!==true){window.__loadedJsLibraries["/res/js/lib/DOM2JSON.js"]=true;(function(window){var cm4all=(window.cm4all=window.cm4all||{});if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}var TEXT_ACCESSOR="nodeValue";var IE8=(document.documentMode&&document.documentMode<9);if(IE8){Object.defineProperty=function(target,name,config){if(config.value){target[name]=config.value}else{target[name]=(config.get||config.set)?function(){if(arguments.length>0){config.set.apply(target,arguments)}else{return config.get()}}:target[name]}}}cm4all.DOM2JSON=function(node){if(node){Object.defineProperty(this,"$dom",{enumerable:false,configurable:false,value:node});switch(node.nodeType){case 3:case 4:text2json(node,this);break;case 9:element2json(node.documentElement,this);break;case 1:element2json(node,this);break;case 2:attribute2json(node,this)}}};cm4all.JSONAccess=function(o){this.o=o||window};cm4all.JSONAccess.prototype.$get=function(jsonPath){return $get.call(this.o,jsonPath)};cm4all.JSONAccess.prototype.$set=function(jsonPath,jsonObject){$set.call(this.o,jsonPath,jsonObject);return this.$get(jsonPath)};cm4all.DOM2JSON.prototype.$getValue=function(jsonPath,baseObject){return cm4all.DOM2JSON.prototype.$get.call(baseObject||window,jsonPath)};function JSONAccess(){}JSONAccess.prototype.$get=function(jsonPath){return $get.call(this,jsonPath)};Object.defineProperty(JSONAccess.prototype,"$get",{enumerable:false});JSONAccess.prototype.$set=function(jsonPath,jsonObject){$set.call(this,jsonPath,jsonObject);return this.$get(jsonPath)};Object.defineProperty(JSONAccess.prototype,"$set",{enumerable:false});cm4all.DOM2JSON.prototype.$get=JSONAccess.prototype.$get;cm4all.DOM2JSON.prototype.$set=JSONAccess.prototype.$set;function $get(jsonPath){try{return eval("this"+functionalizeNormalizedJsonPath(normalizeJsonPath(jsonPath)))}catch(e){return undefined}}function $set(jsonPath,jsonObject){jsonPath=normalizeJsonPath(jsonPath);var steps=jsonPath.split(/\[|\]?\[|\]/);if(steps[0]===""){steps.shift()}try{ensureObject(steps,this,jsonObject)}catch(e){Common.log(e.message)}}function ensureAttribute(element,name,value,jsonElement){var valueType=typeof value;if(value!==null&&valueType!==undefined&&valueType!=="string"){Common.log("Illegal type for attribute value "+value);return}var i;if(value==null||typeof value=="undefined"){element.removeAttribute(name);delete jsonElement["@"+name]}else{element.setAttribute(name,value)}children=element.attributes;for(i=0;i<children.length;i++){attribute2json(children.item(i),jsonElement)}}function ensureTextNode(element,text,jsonElement){var valueType=typeof text;if(text!==null&&valueType!=="undefined"&&valueType!=="string"){return}var textNode=element.ownerDocument.createTextNode(text);element.appendChild(textNode);text2json(textNode,jsonElement)}function appendElement(parentElement,parentJsonElement,name,childJsonElement){var newElement=parentElement.ownerDocument.createElement(name);parentElement.appendChild(newElement);if(parentJsonElement){element2json(newElement,parentJsonElement)}jsonElement2element(childJsonElement,newElement)}function ensureObject(steps,current,jsonObject){var element,step=steps.shift();step=step.trim();step=/^"/.test(step)?step.replace(/^"(.*)"$/,"$1"):Number(step);element=resolve(current.$dom);if(typeof resolve(current[step])==="undefined"){ensureJsonPath(steps,step,element,current,jsonObject);return}if(Boolean(steps[0])){ensureObject(steps,resolve(current[step]),jsonObject)}else{setJsonObject(step,element,current,jsonObject)}}function setJsonObject(step,element,current,jsonObject){var currentElement,i,children;if(/^@/.test(step)){ensureAttribute(element,step.replace(/^@/,""),jsonObject,current)}else{if(/^\$$/.test(step)){children=element.childNodes;for(i=children.length-1;i>=0;i--){currentElement=children.item(i);switch(currentElement.nodeType){case 3:case 4:element.removeChild(currentElement)}}ensureTextNode(element,jsonObject,current)}else{if(typeof step==="number"){element=resolve(resolve(current[step]).$dom);jsonElement2element(jsonObject,element)}else{children=element.childNodes;for(i=children.length-1;i>=0;i--){currentElement=children.item(i);if(currentElement.nodeName===step){switch(currentElement.nodeType){case 1:element.removeChild(currentElement)}}}if(jsonObject==null||jsonObject==undefined){return}jsonObject=Object.isArray(jsonObject)?jsonObject:[jsonObject];for(i=0;i<jsonObject.length;i++){appendElement(element,i===jsonObject.length-1?resolve(current.$parent):null,step,resolve(jsonObject[i]))}}}}}function ensureJsonPath(steps,step,element,current,jsonObject){var i;if(typeof step==="number"){element=resolve(resolve(current.$parent).$dom);for(i=Object.isArray(current)?current.length:1;i<=step;i++){appendElement(element,resolve(current.$parent),resolve(current.$name),{})}current=resolve(resolve(current.$parent)[resolve(current.$name)])}else{if(element){if(/^@/.test(step)){ensureAttribute(element,step.replace(/^@/,""),"",current)}else{if(/^\$$/.test(step)){ensureTextNode(element,"",current)}else{appendElement(element,current,step,{})}}}else{Common.log("Expected element node but found other.")}}steps.unshift(String(typeof step==="number"?step:'"'+step+'"'));ensureObject(steps,current,jsonObject)}function normalizeJsonPath(jsonPath){return("."+jsonPath).replace(/\[\s*"(.*?)"\s*\]/g,function($0,$1){return"."+$1.replace(/\./g,"\\.")}).replace(/\[\s*'(.*?)'\s*\]/g,function($0,$1){return"."+$1.replace(/\./g,"\\.")}).replace(/\[\s*(.*?)\s*\]/g,function($0,$1){return"."+$1.replace(/\./g,"\\.")}).replace(/^\.\./,".").replace(/\.(([\\][\.]|[^.])*)/g,function($0,$1){var val=$1.replace(/"/g,'\\"').replace(/\\./g,".");var quote=isNaN(Number(val))?'"':"";return"["+quote+val+quote+"]"})}function functionalizeNormalizedJsonPath(normalizedJsonPath){return normalizedJsonPath.replace(/\]/g,IE8?"]()":"]")}function element2json(element,parentJsonElement){if(element==null||element.nodeType==undefined||element.nodeType!=1){return}collectSiblingElements(parentJsonElement,element)}function element2jsonElement(element,parentJsonObject){var i,jsonObject=new JSONAccess(),children=element.childNodes;Object.defineProperty(jsonObject,"$dom",{enumerable:false,configurable:false,value:element});Object.defineProperty(jsonObject,"$parent",{enumerable:false,configurable:false,value:parentJsonObject});Object.defineProperty(jsonObject,"$name",{enumerable:false,configurable:false,value:element.nodeName});for(i=0;i<children.length;i++){collectSiblingElements(jsonObject,children.item(i))}children=element.attributes;for(i=0;i<children.length;i++){attribute2json(children.item(i),jsonObject)}return jsonObject}function collectSiblingElements(parentJsonElement,element){var parent=element.parentNode;switch(element.nodeType){case 1:if(!parentJsonElement.hasOwnProperty(element.nodeName)){Object.defineProperty(parentJsonElement,element.nodeName,{configurable:true,enumerable:true,get:function(){var store=[],j,elements=parent.childNodes;for(j=0;j<elements.length;j++){collectAllSiblingsWithNodeName(elements.item(j),element.nodeName,store,parentJsonElement)}if(store.length>1){store.$parent=parentJsonElement;store.$name=element.nodeName;return store}return resolve(store[0])},set:function(newValue){var elements=parent.childNodes,j,ce;for(j=elements.length-1;j>=0;j--){ce=elements.item(j);if(ce.nodeName===element.nodeName&&ce.nodeType===1){parent.removeChild(ce)}}if(newValue){newValue=Object.isArray(newValue)?newValue:[newValue];for(j=0;j<newValue.length;j++){appendElement(parent,parentJsonElement,element.nodeName,resolve(newValue[j]))}}}})}break;case 3:case 4:text2json(element,parentJsonElement)}}function collectAllSiblingsWithNodeName(element,nodeName,store,parentJsonObject){if(element.nodeName===nodeName){switch(element.nodeType){case 1:Object.defineProperty(store,store.length,{configurable:true,enumerable:true,get:function(){if(!element){return element}return element2jsonElement(element,parentJsonObject)},set:function(newValue){if(!newValue){element.parentNode.removeChild(element);element=undefined}else{jsonElement2element(newValue,element)}}})}}}function jsonElement2element(jsonElement,element){var key=undefined,value,children,current,i;children=element.childNodes;for(i=children.length-1;i>=0;i--){element.removeChild(children.item(i))}children=element.attributes;for(i=children.length-1;i>=0;i--){element.removeAttributeNode(children.item(i))}for(key in jsonElement){value=resolve(jsonElement[key]);if(/^@/.test(key)){element.setAttribute(key.replace(/^@/,""),value)}else{if(/^\$$/.test(key)){element.appendChild(element.ownerDocument.createTextNode(value))}else{if(Object.isArray(value)){for(i=0;i<value.length;i++){current=element.ownerDocument.createElement(key);element.appendChild(current);jsonElement2element(resolve(value[i]),current)}}else{if(value){current=element.ownerDocument.createElement(key);element.appendChild(current);jsonElement2element(value,current)}}}}}}function attribute2json(attribute,jsonElement){Object.defineProperty(jsonElement,"@"+attribute.name,{configurable:true,enumerable:true,get:function(){return attribute.value},set:function(newValue){if(newValue==null||typeof newValue==="undefined"){attribute.ownerElement.removeAttributeNode(attribute)}else{attribute.value=newValue}}})}function text2json(textNode,jsonElement){Object.defineProperty(jsonElement,"$",{configurable:true,enumerable:true,get:function(){var current,children=textNode.parentNode.childNodes,i,text=undefined;for(i=0;i<children.length;i++){current=children.item(i);switch(current.nodeType){case 3:case 4:text=(text||"")+current[TEXT_ACCESSOR]}}return(text?text.trim():text)},set:function(newValue){var parent=textNode.parentNode,current,children=parent.childNodes,i;for(i=children.length-1;i>=0;i--){current=children.item(i);switch(current.nodeType){case 3:case 4:if(i>0){parent.removeChild(current)}else{current.data=newValue;textNode=current}}}}})}function resolve(o){if(typeof o=="function"){return o()}return o}})(window)}window.__loadedCssLibraries["/res/js/lib/css/xlate.css"]=true;window.__loadedCssLibraries["/res/js/lib/css/fullscreen.css"]=true;