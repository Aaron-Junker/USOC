1671916367
waR3U4bTeM%3A487b1edd98abc95680dfcb83b2c08bab-af41027b6bae4a84156cbd87da1831b7
s:20244:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxMjp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6ImFmNDEwMjdiNmJhZTRhODQxNTZjYmQ4N2RhMTgzMWI3IjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6OToiaW5kZXgucGhwIjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHBhdGgiO3M6MzY6InRlc3Qvd2ViLWRvYy1lZGl0b3ItbWFzdGVyL2luZGV4LnBocCI7czo0MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBzb3VyY2UiO3M6MTQzNzk6Ijw/cGhwCgpzZXNzaW9uX3N0YXJ0KCk7CgpyZXF1aXJlX29uY2UgZGlybmFtZShfX0ZJTEVfXykgLiAnL3BocC9odG1sLnRlbXBsYXRlcy5waHAnOwpyZXF1aXJlX29uY2UgZGlybmFtZShfX0ZJTEVfXykgLiAnL3BocC9Db25mLnBocCc7CnJlcXVpcmVfb25jZSBkaXJuYW1lKF9fRklMRV9fKSAuICcvcGhwL29hdXRoLnBocCc7CnJlcXVpcmVfb25jZSBkaXJuYW1lKF9fRklMRV9fKSAuICcvcGhwL3V0aWxpdHkucGhwJzsKCi8vIFBlcm0gbGluayBtYW5hZ2VtZW50CmlmIChpc3NldCgkX1JFUVVFU1RbJ3Blcm0nXSkpIHsKCiAgICAkcGVybSA9IHRyaW0oJF9SRVFVRVNUWydwZXJtJ10sICcvICcpOwoKICAgIGlmKCBzdWJzdHIoJHBlcm0sIC00KSA9PSAnLnBocCcgKQogICAgewogICAgICAgIHJlcXVpcmVfb25jZSBkaXJuYW1lKF9fRklMRV9fKSAuICcvcGhwL1Byb2plY3RNYW5hZ2VyLnBocCc7CiAgICAgICAgcmVxdWlyZV9vbmNlIGRpcm5hbWUoX19GSUxFX18pIC4gJy9waHAvUmVwb3NpdG9yeUZldGNoZXIucGhwJzsKCiAgICAgICAgJF9wcm9qZWN0ID0gJF9SRVFVRVNUWydwcm9qZWN0J107CgogICAgICAgIC8vIFNldCB0aGUgcHJvamVjdAogICAgICAgIFByb2plY3RNYW5hZ2VyOjpnZXRJbnN0YW5jZSgpLT5zZXRQcm9qZWN0KCRfcHJvamVjdCk7CgogICAgICAgICRfcCAgICA9IGV4cGxvZGUoJy8nLCAkcGVybSk7CiAgICAgICAgJF9sYW5nID0gYXJyYXlfc2hpZnQoJF9wKTsKICAgICAgICAkX2ZpbGUgPSBhcnJheV9wb3AoJF9wKTsKCiAgICAgICAgJF9pZCAgID0gZXhwbG9kZSgnLicsICRfZmlsZSk7CiAgICAgICAgYXJyYXlfcG9wKCRfaWQpOwogICAgICAgICR4bWxpZCA9IGltcGxvZGUoJy4nLCAkX2lkKTsKCiAgICAgICAgJHIgPSBSZXBvc2l0b3J5RmV0Y2hlcjo6Z2V0SW5zdGFuY2UoKS0+Z2V0RmlsZUJ5WG1sSUQoJF9sYW5nLCAkeG1saWQpOwoKICAgICAgICBpZiAoICRyICkgewogICAgICAgICAgICAkanNWYXIgPSAiXG4iLid2YXIgZGlyZWN0QWNjZXNzID0geyJsaW5rIjoicGVybSIsICJsYW5nIjoiJy4kci0+bGFuZy4nIiwgInBhdGgiOiInLiRyLT5wYXRoLiciLCAibmFtZSI6IicuJHItPm5hbWUuJyIsICJwcm9qZWN0IjoiJy4kX3Byb2plY3QuJyJ9LCc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJGpzVmFyID0gIlxuIi4ndmFyIGRpcmVjdEFjY2VzcyA9IGZhbHNlLCc7CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICAkanNWYXIgPSAiXG4iLid2YXIgZGlyZWN0QWNjZXNzID0gZmFsc2UsJzsKICAgIH0KCn0gZWxzZSBpZiAoaXNzZXQoJF9SRVFVRVNUWydwYXRjaCddKSkgewoKICAgICRwYXRjaCA9IHRyaW0oJF9SRVFVRVNUWydwYXRjaCddLCAnLyAnKTsKICAgICRfcHJvamVjdCA9ICRfUkVRVUVTVFsncHJvamVjdCddOwoKICAgIHJlcXVpcmVfb25jZSBkaXJuYW1lKF9fRklMRV9fKSAuICcvcGhwL1Byb2plY3RNYW5hZ2VyLnBocCc7CgogICAgLy8gU2V0IHRoZSBwcm9qZWN0CiAgICBQcm9qZWN0TWFuYWdlcjo6Z2V0SW5zdGFuY2UoKS0+c2V0UHJvamVjdCgkX3Byb2plY3QpOwoKICAgICRfcGF0Y2ggPSBleHBsb2RlKCcvJywgJHBhdGNoKTsKICAgICRmaWxlTmFtZSA9ICRfcGF0Y2hbY291bnQoJF9wYXRjaCktMV07CiAgICAkZmlsZVBhdGggPSBzdWJzdHIoJHBhdGNoLCAwLCAoc3RybGVuKCRwYXRjaCktc3RybGVuKCRmaWxlTmFtZSkpKTsKCiAgICAkanNWYXIgPSAiXG4iLid2YXIgZGlyZWN0QWNjZXNzID0geyJsaW5rIjoicGF0Y2giLCAibGFuZyI6ImVuIiwgInBhdGgiOiInLmh0bWxzcGVjaWFsY2hhcnMoJGZpbGVQYXRoKS4nIiwgIm5hbWUiOiInLmh0bWxzcGVjaWFsY2hhcnMoJGZpbGVOYW1lKS4nIiwgInByb2plY3QiOiInLmh0bWxzcGVjaWFsY2hhcnMoJF9wcm9qZWN0KS4nIn0sJzsKCn0gZWxzZSBpZiAoaXNzZXQoJF9SRVFVRVNUWydwYXRjaElEJ10pKSB7CgogICAgJHBhdGNoSUQgPSB0cmltKCRfUkVRVUVTVFsncGF0Y2hJRCddLCAnLyAnKTsKICAgICRfcHJvamVjdCA9ICRfUkVRVUVTVFsncHJvamVjdCddOwoKICAgIHJlcXVpcmVfb25jZSBkaXJuYW1lKF9fRklMRV9fKSAuICcvcGhwL1Byb2plY3RNYW5hZ2VyLnBocCc7CiAgICByZXF1aXJlX29uY2UgZGlybmFtZShfX0ZJTEVfXykgLiAnL3BocC9SZXBvc2l0b3J5TWFuYWdlci5waHAnOwoKICAgIC8vIFNldCB0aGUgcHJvamVjdAogICAgUHJvamVjdE1hbmFnZXI6OmdldEluc3RhbmNlKCktPnNldFByb2plY3QoJF9wcm9qZWN0KTsKCiAgICAkcGF0Y2hJbmZvID0gUmVwb3NpdG9yeU1hbmFnZXI6OmdldEluc3RhbmNlKCktPmdldFBhdGNoSW5mbygkcGF0Y2hJRCk7CgogICAgJGpzVmFyID0gIlxuIi4ndmFyIGRpcmVjdEFjY2VzcyA9IHsibGluayI6InBhdGNoSUQiLCAibGFuZyI6ImVuIiwgInBhdGNoSUQiOiInLmh0bWxzcGVjaWFsY2hhcnMoJHBhdGNoSUQpLiciLCAicGF0Y2hOYW1lIjoiJy5odG1sc3BlY2lhbGNoYXJzKCRwYXRjaEluZm8tPm5hbWUpLiciLCAicHJvamVjdCI6IicuaHRtbHNwZWNpYWxjaGFycygkX3Byb2plY3QpLicifSwnOwoKfSBlbHNlIGlmIChpc3NldCgkX1JFUVVFU1RbJ2FjdGlvbiddKSkgewoKICAgICRfcHJvamVjdCA9ICRfUkVRVUVTVFsncHJvamVjdCddOwogICAgJF9hY3Rpb24gPSAkX1JFUVVFU1RbJ2FjdGlvbiddOwogICAgJF9pZERCID0gJF9SRVFVRVNUWydpZERCJ107CgogICAgcmVxdWlyZV9vbmNlIGRpcm5hbWUoX19GSUxFX18pIC4gJy9waHAvUHJvamVjdE1hbmFnZXIucGhwJzsKCiAgICAvLyBTZXQgdGhlIHByb2plY3QKICAgIFByb2plY3RNYW5hZ2VyOjpnZXRJbnN0YW5jZSgpLT5zZXRQcm9qZWN0KCRfcHJvamVjdCk7CgogICAgJGpzVmFyID0gIlxuIi4ndmFyIGRpcmVjdEFjY2VzcyA9IHsKICAgICAgICAicHJvamVjdCI6IicuaHRtbHNwZWNpYWxjaGFycygkX3Byb2plY3QpLiciLAogICAgICAgICJhY3Rpb24iOiAiJy5odG1sc3BlY2lhbGNoYXJzKCRfYWN0aW9uKS4nIiwKICAgICAgICAiaWREQiI6ICInLmh0bWxzcGVjaWFsY2hhcnMoJF9pZERCKS4nIgogICAgfSwnOwoKfSBlbHNlIHsKICAgICRqc1ZhciA9ICJcbnZhciBkaXJlY3RBY2Nlc3MgPSBmYWxzZSwiOwp9CgovLyBJbml0IGF1dGggdmFyCmlmKCBpc3NldCgkX0NPT0tJRVsnbG9naW5BcHAnXSkgKSB7CiAgICAkanNWYXIgLj0gIiBsb2dpbkFwcCA9IFwiIi5odG1sX2VudGl0eV9kZWNvZGUoJF9DT09LSUVbJ2xvZ2luQXBwJ10pLiJcIiwiOwp9IGVsc2UgewogICAgJGpzVmFyIC49ICIgbG9naW5BcHAgPSBmYWxzZSwiOwp9CgokanNWYXIgLj0gIiBhdXRoID0ge307XG4iOwoKCi8vIExvZyB0aGUgdXNlciBpbiBpZiBuZWVkZWQKaWYgKCFpc3NldCgkX1NFU1NJT05bJ3VzZXJJRCddKSkKewogICAgJENvbmYgPSBDb25maWc6OmdldEluc3RhbmNlKCktPmdldENvbmYoKTsKCiAgICAvLyBJbml0IHZhcgogICAgaWYoICFpc3NldCgkX1NFU1NJT05bJ29hdXRoJ10pICkgICRfU0VTU0lPTlsnb2F1dGgnXSA9IGFycmF5KCk7CgogICAgLyogaW5zdGFncmFtICovCiAgICBpZiggaXNzZXQoJF9HRVRbJ29hdXRoJ10pICYmICRfR0VUWydvYXV0aCddID09ICdpbnN0YWdyYW0nKSB7CgogICAgICAgICRfU0VTU0lPTlsnb2F1dGgnXVsnaWRlbnRTZXJ2aWNlJ10gPSAnaW5zdGFncmFtJzsKCiAgICAgICAgJGluc3RhZ3JhbSA9IG5ldyBPYXV0aF9pbnN0YWdyYW0oJENvbmZbJ0dMT0JBTF9DT05GSUdVUkFUSU9OJ11bJ29hdXRoLmluc3RhZ3JhbS5jbGllbnRJRCddLCAkQ29uZlsnR0xPQkFMX0NPTkZJR1VSQVRJT04nXVsnb2F1dGguaW5zdGFncmFtLmNsaWVudFNlY3JldCddKTsKICAgICAgICAkaW5zdGFncmFtLT5yZWRpcmVjdF91cmkgPSAkQ29uZlsnR0xPQkFMX0NPTkZJR1VSQVRJT04nXVsnb2F1dGgucmVkaXJlY3RVUkwnXTsKCiAgICAgICAgJGluc3RhZ3JhbS0+UmVxdWVzdENvZGUoKTsKICAgIH0KCiAgICBpZiggaXNzZXQoJF9TRVNTSU9OWydvYXV0aCddWydpZGVudFNlcnZpY2UnXSkgJiYgJF9TRVNTSU9OWydvYXV0aCddWydpZGVudFNlcnZpY2UnXSA9PSAnaW5zdGFncmFtJyAmJiBpc3NldCgkX0dFVFsnY29kZSddKSApIHsKCiAgICAgICAgJGluc3RhZ3JhbSA9IG5ldyBPYXV0aF9pbnN0YWdyYW0oJENvbmZbJ0dMT0JBTF9DT05GSUdVUkFUSU9OJ11bJ29hdXRoLmluc3RhZ3JhbS5jbGllbnRJRCddLCAkQ29uZlsnR0xPQkFMX0NPTkZJR1VSQVRJT04nXVsnb2F1dGguaW5zdGFncmFtLmNsaWVudFNlY3JldCddKTsKICAgICAgICAkaW5zdGFncmFtLT5yZWRpcmVjdF91cmkgPSAkQ29uZlsnR0xPQkFMX0NPTkZJR1VSQVRJT04nXVsnb2F1dGgucmVkaXJlY3RVUkwnXTsKICAgICAgICAkYWNjZXNzX3Rva2VuID0gJGluc3RhZ3JhbS0+UmVxdWVzdFRva2VuKCRfR0VUWydjb2RlJ10pOwogICAgICAgICR1c2VyID0gJGluc3RhZ3JhbS0+Z2V0VXNlckluZm8oJGFjY2Vzc190b2tlbi0+YWNjZXNzX3Rva2VuKTsKCiAgICAgICAgJGpzVmFyIC49ICIKICAgICAgICAgICAgYXV0aC5zZXJ2aWNlICAgPSBcIiIuJF9TRVNTSU9OWydvYXV0aCddWydpZGVudFNlcnZpY2UnXS4iXCIsCiAgICAgICAgICAgIGF1dGguc2VydmljZUlEID0gXCIiLmh0bWxzcGVjaWFsY2hhcnMoJHVzZXItPmlkKS4iXCIsCiAgICAgICAgICAgIGF1dGgubG9naW4gICAgID0gXCIiLmh0bWxzcGVjaWFsY2hhcnMoJHVzZXItPnVzZXJuYW1lKS4iXCIsCiAgICAgICAgICAgIGF1dGguZW1haWwgICAgID0gXCJcIjsKICAgICAgICAiOwoKICAgIH0KCiAgICAvKiBHaXRodWIgKi8KICAgIGlmKCBpc3NldCgkX0dFVFsnb2F1dGgnXSkgJiYgJF9HRVRbJ29hdXRoJ10gPT0gJ2dpdGh1YicpIHsKCiAgICAgICAgJF9TRVNTSU9OWydvYXV0aCddWydpZGVudFNlcnZpY2UnXSA9ICdnaXRodWInOwoKICAgICAgICAkZ2l0ID0gbmV3IE9hdXRoX2dpdGh1YigkQ29uZlsnR0xPQkFMX0NPTkZJR1VSQVRJT04nXVsnb2F1dGguZ2l0aHViLmNsaWVudElEJ10sICRDb25mWydHTE9CQUxfQ09ORklHVVJBVElPTiddWydvYXV0aC5naXRodWIuY2xpZW50U2VjcmV0J10pOwogICAgICAgICRnaXQtPnJlZGlyZWN0X3VyaSA9ICRDb25mWydHTE9CQUxfQ09ORklHVVJBVElPTiddWydvYXV0aC5yZWRpcmVjdFVSTCddOwoKICAgICAgICAkZ2l0LT5SZXF1ZXN0Q29kZSgpOwogICAgfQoKICAgIGlmKCBpc3NldCgkX1NFU1NJT05bJ29hdXRoJ11bJ2lkZW50U2VydmljZSddKSAmJiAkX1NFU1NJT05bJ29hdXRoJ11bJ2lkZW50U2VydmljZSddID09ICdnaXRodWInICYmIGlzc2V0KCRfR0VUWydjb2RlJ10pICkgewoKICAgICAgICAkZ2l0ID0gbmV3IE9hdXRoX2dpdGh1YigkQ29uZlsnR0xPQkFMX0NPTkZJR1VSQVRJT04nXVsnb2F1dGguZ2l0aHViLmNsaWVudElEJ10sICRDb25mWydHTE9CQUxfQ09ORklHVVJBVElPTiddWydvYXV0aC5naXRodWIuY2xpZW50U2VjcmV0J10pOwogICAgICAgICRnaXQtPnJlZGlyZWN0X3VyaSA9ICRDb25mWydHTE9CQUxfQ09ORklHVVJBVElPTiddWydvYXV0aC5yZWRpcmVjdFVSTCddOwogICAgICAgICRhY2Nlc3NfdG9rZW4gPSAkZ2l0LT5SZXF1ZXN0VG9rZW4oJF9HRVRbJ2NvZGUnXSk7CiAgICAgICAgJHVzZXIgPSAkZ2l0LT5nZXRVc2VySW5mbygkYWNjZXNzX3Rva2VuKTsKCiAgICAgICAgJGpzVmFyIC49ICIKICAgICAgICAgICAgYXV0aC5zZXJ2aWNlICAgPSBcIiIuJF9TRVNTSU9OWydvYXV0aCddWydpZGVudFNlcnZpY2UnXS4iXCIsCiAgICAgICAgICAgIGF1dGguc2VydmljZUlEID0gXCIiLmh0bWxzcGVjaWFsY2hhcnMoJHVzZXItPmlkKS4iXCIsCiAgICAgICAgICAgIGF1dGgubG9naW4gICAgID0gXCIiLmh0bWxzcGVjaWFsY2hhcnMoJHVzZXItPm5hbWUpLiJcIiwKICAgICAgICAgICAgYXV0aC5lbWFpbCAgICAgPSBcIiIuaHRtbHNwZWNpYWxjaGFycygkdXNlci0+ZW1haWwpLiJcIjsKCiAgICAgICAgIjsKCiAgICB9CgoKICAgIC8qIHN0YWNrb3ZlcmZsb3cgKi8KICAgIGlmKCBpc3NldCgkX0dFVFsnb2F1dGgnXSkgJiYgJF9HRVRbJ29hdXRoJ10gPT0gJ3N0YWNrb3ZlcmZsb3cnKSB7CgogICAgICAgICRfU0VTU0lPTlsnb2F1dGgnXVsnaWRlbnRTZXJ2aWNlJ10gPSAnc3RhY2tvdmVyZmxvdyc7CgogICAgICAgICRzdGFjayA9IG5ldyBPYXV0aF9zdGFja292ZXJmbG93KCRDb25mWydHTE9CQUxfQ09ORklHVVJBVElPTiddWydvYXV0aC5zdGFja292ZXJmbG93LmNsaWVudElEJ10sICRDb25mWydHTE9CQUxfQ09ORklHVVJBVElPTiddWydvYXV0aC5zdGFja292ZXJmbG93LmNsaWVudFNlY3JldCddLCAkQ29uZlsnR0xPQkFMX0NPTkZJR1VSQVRJT04nXVsnb2F1dGguc3RhY2tvdmVyZmxvdy5jbGllbnRLZXknXSk7CiAgICAgICAgJHN0YWNrLT5yZWRpcmVjdF91cmkgPSAkQ29uZlsnR0xPQkFMX0NPTkZJR1VSQVRJT04nXVsnb2F1dGgucmVkaXJlY3RVUkwnXTsKCiAgICAgICAgJHN0YWNrLT5SZXF1ZXN0Q29kZSgpOwogICAgfQoKICAgIGlmKCBpc3NldCgkX1NFU1NJT05bJ29hdXRoJ11bJ2lkZW50U2VydmljZSddKSAmJiAkX1NFU1NJT05bJ29hdXRoJ11bJ2lkZW50U2VydmljZSddID09ICdzdGFja292ZXJmbG93JyAmJiBpc3NldCgkX0dFVFsnY29kZSddKSApIHsKCiAgICAgICAgJHN0YWNrID0gbmV3IE9hdXRoX3N0YWNrb3ZlcmZsb3coJENvbmZbJ0dMT0JBTF9DT05GSUdVUkFUSU9OJ11bJ29hdXRoLnN0YWNrb3ZlcmZsb3cuY2xpZW50SUQnXSwgJENvbmZbJ0dMT0JBTF9DT05GSUdVUkFUSU9OJ11bJ29hdXRoLnN0YWNrb3ZlcmZsb3cuY2xpZW50U2VjcmV0J10sICRDb25mWydHTE9CQUxfQ09ORklHVVJBVElPTiddWydvYXV0aC5zdGFja292ZXJmbG93LmNsaWVudEtleSddKTsKICAgICAgICAkc3RhY2stPnJlZGlyZWN0X3VyaSA9ICRDb25mWydHTE9CQUxfQ09ORklHVVJBVElPTiddWydvYXV0aC5yZWRpcmVjdFVSTCddOwogICAgICAgICRhY2Nlc3NfdG9rZW4gPSAkc3RhY2stPlJlcXVlc3RUb2tlbigkX0dFVFsnY29kZSddKTsKCiAgICAgICAgJHVzZXIgPSAkc3RhY2stPmdldFVzZXJJbmZvKCRhY2Nlc3NfdG9rZW4pOwoKICAgICAgICAkanNWYXIgLj0gIgoKICAgICAgICAgICAgYXV0aC5zZXJ2aWNlICAgPSBcIiIuJF9TRVNTSU9OWydvYXV0aCddWydpZGVudFNlcnZpY2UnXS4iXCIsCiAgICAgICAgICAgIGF1dGguc2VydmljZUlEID0gXCIiLmh0bWxzcGVjaWFsY2hhcnMoJHVzZXItPml0ZW1zWzBdLT51c2VyX2lkKS4iXCIsCiAgICAgICAgICAgIGF1dGgubG9naW4gICAgID0gXCIiLmh0bWxzcGVjaWFsY2hhcnModXRmOF9lbmNvZGUoaHRtbF9lbnRpdHlfZGVjb2RlKCR1c2VyLT5pdGVtc1swXS0+ZGlzcGxheV9uYW1lKSkpLiJcIiwKICAgICAgICAgICAgYXV0aC5lbWFpbCAgICAgPSBcIlwiOwoKICAgICAgICAiOwoKICAgIH0KCiAgICAvKiBmYWNlYm9vayAqLwogICAgaWYoIGlzc2V0KCRfR0VUWydvYXV0aCddKSAmJiAkX0dFVFsnb2F1dGgnXSA9PSAnZmFjZWJvb2snKSB7CgogICAgICAgICRfU0VTU0lPTlsnb2F1dGgnXVsnaWRlbnRTZXJ2aWNlJ10gPSAnZmFjZWJvb2snOwoKICAgICAgICAkZmFjZWJvb2sgPSBuZXcgT2F1dGhfZmFjZWJvb2soJENvbmZbJ0dMT0JBTF9DT05GSUdVUkFUSU9OJ11bJ29hdXRoLmZhY2Vib29rLmNsaWVudElEJ10sICRDb25mWydHTE9CQUxfQ09ORklHVVJBVElPTiddWydvYXV0aC5mYWNlYm9vay5jbGllbnRTZWNyZXQnXSk7CiAgICAgICAgJGZhY2Vib29rLT5yZWRpcmVjdF91cmkgPSAkQ29uZlsnR0xPQkFMX0NPTkZJR1VSQVRJT04nXVsnb2F1dGgucmVkaXJlY3RVUkwnXTsKCiAgICAgICAgJGZhY2Vib29rLT5SZXF1ZXN0Q29kZSgpOwogICAgfQoKICAgIGlmKCBpc3NldCgkX1NFU1NJT05bJ29hdXRoJ11bJ2lkZW50U2VydmljZSddKSAmJiAkX1NFU1NJT05bJ29hdXRoJ11bJ2lkZW50U2VydmljZSddID09ICdmYWNlYm9vaycgJiYgaXNzZXQoJF9HRVRbJ2NvZGUnXSkgKSB7CgogICAgICAgICRmYWNlYm9vayA9IG5ldyBPYXV0aF9mYWNlYm9vaygkQ29uZlsnR0xPQkFMX0NPTkZJR1VSQVRJT04nXVsnb2F1dGguZmFjZWJvb2suY2xpZW50SUQnXSwgJENvbmZbJ0dMT0JBTF9DT05GSUdVUkFUSU9OJ11bJ29hdXRoLmZhY2Vib29rLmNsaWVudFNlY3JldCddKTsKICAgICAgICAkZmFjZWJvb2stPnJlZGlyZWN0X3VyaSA9ICRDb25mWydHTE9CQUxfQ09ORklHVVJBVElPTiddWydvYXV0aC5yZWRpcmVjdFVSTCddOwogICAgICAgICRhY2Nlc3NfdG9rZW4gPSAkZmFjZWJvb2stPlJlcXVlc3RUb2tlbigkX0dFVFsnY29kZSddKTsKCiAgICAgICAgJHVzZXIgPSAkZmFjZWJvb2stPmdldFVzZXJJbmZvKCRhY2Nlc3NfdG9rZW4pOwoKICAgICAgICAkanNWYXIgLj0gIgoKICAgICAgICAgICAgYXV0aC5zZXJ2aWNlICAgPSBcIiIuJF9TRVNTSU9OWydvYXV0aCddWydpZGVudFNlcnZpY2UnXS4iXCIsCiAgICAgICAgICAgIGF1dGguc2VydmljZUlEID0gXCIiLmh0bWxzcGVjaWFsY2hhcnMoJHVzZXItPmlkKS4iXCIsCiAgICAgICAgICAgIGF1dGgubG9naW4gICAgID0gXCIiLmh0bWxzcGVjaWFsY2hhcnMoJHVzZXItPm5hbWUpLiJcIiwKICAgICAgICAgICAgYXV0aC5lbWFpbCAgICAgPSBcIiIuaHRtbHNwZWNpYWxjaGFycygkdXNlci0+ZW1haWwpLiJcIjsKCiAgICAgICAgIjsKCiAgICB9CgoKICAgIC8qIGdvb2dsZSAqLwogICAgaWYoIGlzc2V0KCRfR0VUWydvYXV0aCddKSAmJiAkX0dFVFsnb2F1dGgnXSA9PSAnZ29vZ2xlJykgewoKICAgICAgICAkX1NFU1NJT05bJ29hdXRoJ11bJ2lkZW50U2VydmljZSddID0gJ2dvb2dsZSc7CgogICAgICAgICRnb29nbGUgPSBuZXcgT2F1dGhfZ29vZ2xlKCRDb25mWydHTE9CQUxfQ09ORklHVVJBVElPTiddWydvYXV0aC5nb29nbGUuY2xpZW50SUQnXSwgJENvbmZbJ0dMT0JBTF9DT05GSUdVUkFUSU9OJ11bJ29hdXRoLmdvb2dsZS5jbGllbnRTZWNyZXQnXSk7CiAgICAgICAgJGdvb2dsZS0+cmVkaXJlY3RfdXJpID0gJENvbmZbJ0dMT0JBTF9DT05GSUdVUkFUSU9OJ11bJ29hdXRoLnJlZGlyZWN0VVJMJ107CgogICAgICAgICRnb29nbGUtPlJlcXVlc3RDb2RlKCk7CiAgICB9CgogICAgaWYoIGlzc2V0KCRfU0VTU0lPTlsnb2F1dGgnXVsnaWRlbnRTZXJ2aWNlJ10pICYmICRfU0VTU0lPTlsnb2F1dGgnXVsnaWRlbnRTZXJ2aWNlJ10gPT0gJ2dvb2dsZScgJiYgaXNzZXQoJF9HRVRbJ2NvZGUnXSkgKSB7CgogICAgICAgICRnb29nbGUgPSBuZXcgT2F1dGhfZ29vZ2xlKCRDb25mWydHTE9CQUxfQ09ORklHVVJBVElPTiddWydvYXV0aC5nb29nbGUuY2xpZW50SUQnXSwgJENvbmZbJ0dMT0JBTF9DT05GSUdVUkFUSU9OJ11bJ29hdXRoLmdvb2dsZS5jbGllbnRTZWNyZXQnXSk7CiAgICAgICAgJGdvb2dsZS0+cmVkaXJlY3RfdXJpID0gJENvbmZbJ0dMT0JBTF9DT05GSUdVUkFUSU9OJ11bJ29hdXRoLnJlZGlyZWN0VVJMJ107CiAgICAgICAgJGFjY2Vzc190b2tlbiA9ICRnb29nbGUtPlJlcXVlc3RUb2tlbigkX0dFVFsnY29kZSddKTsKCiAgICAgICAgJHVzZXIgPSAkZ29vZ2xlLT5nZXRVc2VySW5mbygkYWNjZXNzX3Rva2VuKTsKCiAgICAgICAgJGRpc3BsYXlOYW1lID0gKHRyaW0oJHVzZXItPmRpc3BsYXlOYW1lKSA9PSAiIikgPyAkdXNlci0+ZW1haWwgOiAkdXNlci0+ZGlzcGxheU5hbWU7CgogICAgICAgICRqc1ZhciAuPSAiCgogICAgICAgICAgICBhdXRoLnNlcnZpY2UgICA9IFwiIiAuICRfU0VTU0lPTlsnb2F1dGgnXVsnaWRlbnRTZXJ2aWNlJ10gLiAiXCIsCiAgICAgICAgICAgIGF1dGguc2VydmljZUlEID0gXCIiIC4gaHRtbHNwZWNpYWxjaGFycygkdXNlci0+aWQpIC4gIlwiLAogICAgICAgICAgICBhdXRoLmxvZ2luICAgICA9IFwiIiAuIGh0bWxzcGVjaWFsY2hhcnMoJGRpc3BsYXlOYW1lKSAuICJcIiwKICAgICAgICAgICAgYXV0aC5lbWFpbCAgICAgPSBcIiIgLiBodG1sc3BlY2lhbGNoYXJzKCR1c2VyLT5lbWFpbCkgLiAiXCI7CgogICAgICAgICI7CgogICAgfQoKCiAgICAvKiBsaW5rZWRpbiAqLwogICAgaWYoIGlzc2V0KCRfR0VUWydvYXV0aCddKSAmJiAkX0dFVFsnb2F1dGgnXSA9PSAnbGlua2VkaW4nKSB7CgogICAgICAgICRfU0VTU0lPTlsnb2F1dGgnXVsnaWRlbnRTZXJ2aWNlJ10gPSAnbGlua2VkaW4nOwoKICAgICAgICAkbGlua2VkaW4gPSBuZXcgT2F1dGhfbGlua2VkaW4oJENvbmZbJ0dMT0JBTF9DT05GSUdVUkFUSU9OJ11bJ29hdXRoLmxpbmtlZGluLmNsaWVudElEJ10sICRDb25mWydHTE9CQUxfQ09ORklHVVJBVElPTiddWydvYXV0aC5saW5rZWRpbi5jbGllbnRTZWNyZXQnXSk7CiAgICAgICAgJGxpbmtlZGluLT5yZWRpcmVjdF91cmkgPSAkQ29uZlsnR0xPQkFMX0NPTkZJR1VSQVRJT04nXVsnb2F1dGgucmVkaXJlY3RVUkwnXTsKCiAgICAgICAgJGxpbmtlZGluLT5SZXF1ZXN0Q29kZSgpOwogICAgfQoKICAgIGlmKCBpc3NldCgkX1NFU1NJT05bJ29hdXRoJ11bJ2lkZW50U2VydmljZSddKSAmJiAkX1NFU1NJT05bJ29hdXRoJ11bJ2lkZW50U2VydmljZSddID09ICdsaW5rZWRpbicgJiYgaXNzZXQoJF9HRVRbJ2NvZGUnXSkgKSB7CgogICAgICAgICRsaW5rZWRpbiA9IG5ldyBPYXV0aF9saW5rZWRpbigkQ29uZlsnR0xPQkFMX0NPTkZJR1VSQVRJT04nXVsnb2F1dGgubGlua2VkaW4uY2xpZW50SUQnXSwgJENvbmZbJ0dMT0JBTF9DT05GSUdVUkFUSU9OJ11bJ29hdXRoLmxpbmtlZGluLmNsaWVudFNlY3JldCddKTsKICAgICAgICAkbGlua2VkaW4tPnJlZGlyZWN0X3VyaSA9ICRDb25mWydHTE9CQUxfQ09ORklHVVJBVElPTiddWydvYXV0aC5yZWRpcmVjdFVSTCddOwogICAgICAgICRhY2Nlc3NfdG9rZW4gPSAkbGlua2VkaW4tPlJlcXVlc3RUb2tlbigkX0dFVFsnY29kZSddKTsKCiAgICAgICAgJHVzZXIgPSAkbGlua2VkaW4tPmdldFVzZXJJbmZvKCRhY2Nlc3NfdG9rZW4pOwoKICAgICAgICAkanNWYXIgLj0gIgoKICAgICAgICAgICAgYXV0aC5zZXJ2aWNlICAgPSBcIiIuJF9TRVNTSU9OWydvYXV0aCddWydpZGVudFNlcnZpY2UnXS4iXCIsCiAgICAgICAgICAgIGF1dGguc2VydmljZUlEID0gXCIiLmh0bWxzcGVjaWFsY2hhcnMoJHVzZXJbJ2lkJ10pLiJcIiwKICAgICAgICAgICAgYXV0aC5sb2dpbiAgICAgPSBcIiIuaHRtbHNwZWNpYWxjaGFycygkdXNlclsnbmFtZSddKS4iXCIsCiAgICAgICAgICAgIGF1dGguZW1haWwgICAgID0gXCJcIjsKCiAgICAgICAgIjsKCiAgICB9CgogICAgLyogdHdpdHRlciAqLwogICAgaWYoIGlzc2V0KCRfR0VUWydvYXV0aCddKSAmJiAkX0dFVFsnb2F1dGgnXSA9PSAndHdpdHRlcicpIHsKCiAgICAgICAgcmVxdWlyZV9vbmNlIGRpcm5hbWUoX19GSUxFX18pIC4gJy9waHAvb2F1dGgvdHdpdHRlci90d2l0dGVyb2F1dGgucGhwJzsKCiAgICAgICAgJF9TRVNTSU9OWydvYXV0aCddWydpZGVudFNlcnZpY2UnXSA9ICd0d2l0dGVyJzsKCiAgICAgICAgJGNvbm5lY3Rpb24gPSBuZXcgVHdpdHRlck9BdXRoKCRDb25mWydHTE9CQUxfQ09ORklHVVJBVElPTiddWydvYXV0aC50d2l0dGVyLmNsaWVudElEJ10sICRDb25mWydHTE9CQUxfQ09ORklHVVJBVElPTiddWydvYXV0aC50d2l0dGVyLmNsaWVudFNlY3JldCddKTsKCiAgICAgICAgJHRlbXBvcmFyeV9jcmVkZW50aWFscyA9ICRjb25uZWN0aW9uLT5nZXRSZXF1ZXN0VG9rZW4oJENvbmZbJ0dMT0JBTF9DT05GSUdVUkFUSU9OJ11bJ29hdXRoLnJlZGlyZWN0VVJMJ10pOwogICAgICAgICRyZWRpcmVjdF91cmwgPSAkY29ubmVjdGlvbi0+Z2V0QXV0aG9yaXplVVJMKCR0ZW1wb3JhcnlfY3JlZGVudGlhbHMpOwoKICAgICAgICBoZWFkZXIoJ0xvY2F0aW9uOiAnIC4gJHJlZGlyZWN0X3VybCk7CiAgICAgICAgZXhpdDsKCiAgICB9CgogICAgaWYoIGlzc2V0KCRfU0VTU0lPTlsnb2F1dGgnXVsnaWRlbnRTZXJ2aWNlJ10pICYmICRfU0VTU0lPTlsnb2F1dGgnXVsnaWRlbnRTZXJ2aWNlJ10gPT0gJ3R3aXR0ZXInICYmIGlzc2V0KCRfR0VUWydvYXV0aF90b2tlbiddKSApIHsKICAgICAgICByZXF1aXJlX29uY2UgZGlybmFtZShfX0ZJTEVfXykgLiAnL3BocC9vYXV0aC90d2l0dGVyL3R3aXR0ZXJvYXV0aC5waHAnOwoKCiAgICAgICAgJGNvbm5lY3Rpb24gPSBuZXcgVHdpdHRlck9BdXRoKCRDb25mWydHTE9CQUxfQ09ORklHVVJBVElPTiddWydvYXV0aC50d2l0dGVyLmNsaWVudElEJ10sICRDb25mWydHTE9CQUxfQ09ORklHVVJBVElPTiddWydvYXV0aC50d2l0dGVyLmNsaWVudFNlY3JldCddLCAkX0dFVFsnb2F1dGhfdG9rZW4nXSwkX0dFVFsnb2F1dGhfdmVyaWZpZXInXSk7CgogICAgICAgICR0b2tlbl9jcmVkZW50aWFscyA9ICRjb25uZWN0aW9uLT5nZXRBY2Nlc3NUb2tlbigkX0dFVFsnb2F1dGhfdmVyaWZpZXInXSk7CiAgICAgICAgJGFjY291bnQgPSAkY29ubmVjdGlvbi0+Z2V0KCdhY2NvdW50L3ZlcmlmeV9jcmVkZW50aWFscycpOwoKICAgICAgICAkanNWYXIgLj0gIgoKICAgICAgICAgICAgYXV0aC5zZXJ2aWNlICAgPSBcIiIuJF9TRVNTSU9OWydvYXV0aCddWydpZGVudFNlcnZpY2UnXS4iXCIsCiAgICAgICAgICAgIGF1dGguc2VydmljZUlEID0gXCIiLmh0bWxzcGVjaWFsY2hhcnMoJGFjY291bnQtPmlkX3N0cikuIlwiLAogICAgICAgICAgICBhdXRoLmxvZ2luICAgICA9IFwiIi5odG1sc3BlY2lhbGNoYXJzKCRhY2NvdW50LT5uYW1lKS4iXCIsCiAgICAgICAgICAgIGF1dGguZW1haWwgICAgID0gXCJcIjsKCiAgICAgICAgIjsKICAgIH0KCiAgICBlY2hvIGhlYWRlclRlbXBsYXRlKCk7CiAgICBlY2hvIGNzc0xvYWRUZW1wbGF0ZSgnanMvRXh0SnMvcmVzb3VyY2VzL2Nzcy9leHQtYWxsLmNzcycpOwogICAgZWNobyBjc3NMb2FkVGVtcGxhdGUoJ3RoZW1lcy9sb2dpbi1hbGwuY3NzJyk7CiAgICBlY2hvIGpzQ2FsbFRlbXBsYXRlKCRqc1Zhcik7CiAgICBlY2hvIGpzQ2FsbFRlbXBsYXRlKCdkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibG9hZGluZy1tc2ciKS5pbm5lckhUTUwgPSAiTG9hZGluZyBDb3JlIEFQSS4uLiI7Jyk7CgogICAgZWNobyBqc0xvYWRUZW1wbGF0ZSgnanMvRXh0SnMvYWRhcHRlci9leHQvZXh0LWJhc2UuanMnKTsKICAgIGVjaG8ganNDYWxsVGVtcGxhdGUoJ2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsb2FkaW5nLW1zZyIpLmlubmVySFRNTCA9ICJMb2FkaW5nIFVJIENvbXBvbmVudHMuLi4iOycpOwogICAgZWNobyBqc0xvYWRUZW1wbGF0ZSgnanMvRXh0SnMvZXh0LWFsbC5qcycpOwogICAgZWNobyBqc0NhbGxUZW1wbGF0ZSgnZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImxvYWRpbmctbXNnIikuaW5uZXJIVE1MID0gIkluaXRpYWxpemluZy4uLiI7Jyk7CiAgICBlY2hvIGpzTG9hZFRlbXBsYXRlKCdqcy9sb2dpbi1hbGwuanMnKTsKICAgIGVjaG8gZm9vdGVyVGVtcGxhdGUoJ2xvZ2luUGFnZScpOwogICAgZXhpdDsKfQoKZWNobyBoZWFkZXJUZW1wbGF0ZSgpOwplY2hvIGNzc0xvYWRUZW1wbGF0ZSgnanMvRXh0SnMvcmVzb3VyY2VzL2Nzcy9leHQtYWxsLmNzcycsICdleHRUaGVtZScpOwplY2hvIGNzc0xvYWRUZW1wbGF0ZSgndGhlbWVzL2VtcHR5LmNzcycsICdhcHBUaGVtZScpOwplY2hvIGNzc0xvYWRUZW1wbGF0ZSgndGhlbWVzL21haW4tYWxsLmNzcycpOwplY2hvIGpzQ2FsbFRlbXBsYXRlKCRqc1Zhcik7CmVjaG8ganNDYWxsVGVtcGxhdGUoJ3ZhciBjc3JmVG9rZW4gPSAiJyAuICRfU0VTU0lPTlsnY3NyZlRva2VuJ10gLiAnIjsnKTsKCi8vIEV4dEpzIEphdmFzY3JpcHQgY29yZSBmaWxlcwplY2hvIGpzQ2FsbFRlbXBsYXRlKCdkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibG9hZGluZy1tc2ciKS5pbm5lckhUTUwgPSAiTG9hZGluZyBDb3JlIEFQSS4uLiI7Jyk7CmVjaG8ganNMb2FkVGVtcGxhdGUoJ2pzL0V4dEpzL2FkYXB0ZXIvZXh0L2V4dC1iYXNlLmpzJyk7CmVjaG8ganNDYWxsVGVtcGxhdGUoJ2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsb2FkaW5nLW1zZyIpLmlubmVySFRNTCA9ICJMb2FkaW5nIFVJIENvbXBvbmVudHMuLi4iOycpOwplY2hvIGpzTG9hZFRlbXBsYXRlKCdqcy9FeHRKcy9leHQtYWxsLmpzJyk7CgovL2VjaG8ganNDYWxsVGVtcGxhdGUoJ3dpbmRvdy5fX19nY2ZnID0geyBsYW5nOiBcJ2VuX1VTXCcsIHNpemU6IFwnbWVkaXVtXCcsIGFubm90YXRpb246IFwnYnViYmxlXCcsIHdpZHRoOiA0MH07Jyk7CgovL2VjaG8ganNMb2FkVGVtcGxhdGUoJ2h0dHBzOi8vYXBpcy5nb29nbGUuY29tL2pzL3BsdXNvbmUuanMnKTsKCi8vIEV4dC51eCBKYXZhc2NyaXB0IGZpbGVzCmVjaG8ganNDYWxsVGVtcGxhdGUoJ2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsb2FkaW5nLW1zZyIpLmlubmVySFRNTCA9ICJJbml0aWFsaXppbmcuLi4iOycpOwplY2hvIGpzTG9hZGkxOG5UZW1wbGF0ZSgpOwplY2hvIGpzTG9hZFRlbXBsYXRlKCdqcy9tYWluLWFsbC5qcycpOwplY2hvIGZvb3RlclRlbXBsYXRlKCk7Cj8+CiI7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBuYW1lc3BhY2VzIjthOjA6e31zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGluY2x1ZGVzIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGZ1bmN0aW9ucyI7YTowOnt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjb25zdGFudHMiO2E6MDp7fXM6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAY2xhc3NlcyI7YTowOnt9czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBpbnRlcmZhY2VzIjthOjA6e31zOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHRyYWl0cyI7YTowOnt9fQ==";